<!DOCTYPE html>
<html lang="en">

<head>
    <title>Hydra</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html, body, div, span, applet, object, iframe,
        h1, h2, h3, h4, h5, h6, p, blockquote, pre,
        a, abbr, acronym, address, big, cite, code,
        del, dfn, em, img, ins, kbd, q, s, samp,
        small, strike, strong, sub, sup, tt, var,
        b, u, i, center,
        dl, dt, dd, ol, ul, li,
        fieldset, form, label, legend,
        table, caption, tbody, tfoot, thead, tr, th, td,
        article, aside, canvas, details, embed,
        figure, figcaption, footer, header, hgroup,
        menu, nav, output, ruby, section, summary,
        time, mark, audio, video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }
        /* HTML5 display-role reset for older browsers */
        article, aside, details, figcaption, figure,
        footer, header, hgroup, menu, nav, section {
            display: block;
        }
        html {
            height: 100%;
            overflow: hidden;
        }
        body {
            line-height: 1;
            height: 100%;
            overflow: hidden;
        }
        ol, ul {
            list-style: none;
        }
        blockquote, q {
            quotes: none;
        }
        blockquote:before, blockquote:after,
        q:before, q:after {
            content: '';
            content: none;
        }
        table {
            border-collapse: collapse;
            border-spacing: 0;
        }

        html {
            height: 100%;
            width: 100%;
        }

        body {
            margin: 0;
            width: 100%;
            height: 100%;
            background: #0f1313;
            color: white;
            font-family: sans-serif;
        }

        * {
            box-sizing: border-box;
            cursor: default;
        }

        #hydra {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .deck-screen {
            aspect-ratio: 16/9;
            /* width: 100%;
            height: 100%; */
            background: #0f1313;
            position: relative;
        }

        .canvas {
            aspect-ratio: 16/9;
            width: 100%;
            height: 100%;
            background: black;
            border: solid 1px #272727;
        }

        .mirror-canvas {
            position: absolute;
            left: 0;
            top: 0;
            background: transparent;
            transform: scale(-1, 1);
            /* apply clipping */
        }

        #mixed-canvas:clipped {
            clip-path: polygon(0 0, 50% 0, 50% 100%, 0% 100%);
        }

        #mirror-mixed-canvas.clipped {
            clip-path: polygon(50% 0, 100% 0, 100% 100%, 50% 100%);
            background: black;
        }

        .section {
            width: 100vw;
            display: flex;
            background: black;
            border-top: solid 1px #1b1b1b;
            border-bottom: solid 1px #03030394;
        }

        .extend {
            flex: 1 1 auto;
            overflow-y: auto;
        }

        .column {
            background: #0f1313;
            border-left: solid 1px #1b1b1b;
            border-right: solid 1px #03030394;
            padding: 10px;
            position: relative;
            display: flex;
            flex-basis: 33.333333%;
            flex-grow: 0;
            flex-shrink: 0;
        }

        .column:not(.dropdowns) {
            flex-direction: column;
        }

        #crossfader-section {
            align-items: center;
            display: flex;
            justify-content: center;
        }

        #crossfader-container {
            width: 100%;
        }

        #crossfader {
            width: 100%;
        }

        .lcd-screen {
            background: #0d0d0d;
            box-sizing: border-box;
            border: solid 1px #1a2019;
            padding: 10px;
            border-radius: 2px;
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .readout {
            text-transform: uppercase;
            font-size: 11px;
            color: #b2c2ad;
            font-weight: 600;
            /* justify-content: space-between;
            width: 100%; */
        }

        .label {
            opacity: 0.4;
        }

        .preset-btns {
            text-transform: uppercase;
            font-size: 11px;
            color: #a1a1a1;
            font-weight: 600;
            background: #181818;
            border: solid 1px #515151;
            padding: 15px 0;
            border-radius: 0px;
            cursor: pointer;
            width: 100%;
        }

        .preset-btns:hover {
            background: #2a2a2a;
        }

        button {
            width: 100%;
            margin-top: 10px;
            border: solid 1px #2b2b2b;
            background: transparent;
            padding: 10px;
            color: #8d8d8d;
            text-transform: uppercase;
            font-weight: 800;
            border-radius: 2px;
            font-size: 11px;
            cursor: pointer;
            transition: all ease 100ms;
        }

        button:hover {
            color: white;
        }

        button.on {
            background: #b1b1b1;
            color: black;
        }

        button.green {
            background: #23e648;
            color: black;
        }

        button.pink {
            background: #e623ad;
            color: black;
        }

        button.blue {
            background: #23c2e6;
            color: black;
        }

        button.yellow {
            background: #e4e623;
            color: black;
        }

        button.orange {
            background: #e67423;
            color: black;
        }

        button.red {
            background: #e62323;
            color: white;
        }

        button.raise-to-top {
            width: 35px;
            height: 35px;
            margin-top: 16px;
            background: transparent;
            color: white;
            line-height: 0;
        }

        button.raise-to-top.raised {
            background: #23e648;
            color: black;
        }

        button.raise-to-top:hover {
            background: #23e648;
            color: black;
        }

        button.reset {
            width: 35px;
            margin-top: 16px;
            background: #e62323;
            color: white;
            height: 35px;
            line-height: 0;
        }

        button:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }

        .button-group,
        .main-mixer-panel-group {
            display: flex;
            gap: 10px;
        }

        .button-group > div,
        .main-mixer-panel-group > div {
            width: 100%;
        }

        .main-mixer-panel-group {
            padding-top: 40px;
        }

        .main-mixer-panel-group .deck-1 {
            text-align: right;
        }

        .main-mixer-panel-group .presets button:nth-of-type(1) {
            background: rgba(240,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(1):hover,
        .main-mixer-panel-group .presets button:nth-of-type(1).active {
            background: rgba(240,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(2) {
            background: rgba(150,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(2):hover,
        .main-mixer-panel-group .presets button:nth-of-type(2).active {
            background: rgba(150,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(3) {
            background: rgba(60,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(3):hover,
        .main-mixer-panel-group .presets button:nth-of-type(3).active {
            background: rgba(60,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(4) {
            background: rgba(0,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(4):hover,
        .main-mixer-panel-group .presets button:nth-of-type(4).active {
            background: rgba(0,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(5) {
            background: rgba(0,60,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(5):hover,
        .main-mixer-panel-group .presets button:nth-of-type(5).active {
            background: rgba(0,60,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(6) {
            background: rgba(0,120,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(6):hover,
        .main-mixer-panel-group .presets button:nth-of-type(6).active {
            background: rgba(0,120,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(7) {
            background: rgba(0,180,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(7):hover,
        .main-mixer-panel-group .presets button:nth-of-type(7).active {
            background: rgba(0,180,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(8) {
            background: rgba(0,240,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(8):hover,
        .main-mixer-panel-group .presets button:nth-of-type(8).active {
            background: rgba(0,240,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(9) {
            background: rgba(0,255,210,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(9):hover,
        .main-mixer-panel-group .presets button:nth-of-type(9).active {
            background: rgba(0,255,210,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(10) {
            background: rgba(0,255,150,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(10):hover,
        .main-mixer-panel-group .presets button:nth-of-type(10).active {
            background: rgba(0,255,150,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(11) {
            background: rgba(0,255,90,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(11):hover,
        .main-mixer-panel-group .presets button:nth-of-type(11).active {
            background: rgba(0,255,90,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(12) {
            background: rgba(0,255,30,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(12):hover,
        .main-mixer-panel-group .presets button:nth-of-type(12).active {
            background: rgba(0,255,30,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(13) {
            background: rgba(30,255,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(13):hover,
        .main-mixer-panel-group .presets button:nth-of-type(13).active {
            background: rgba(30,255,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(14) {
            background: rgba(90,255,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(14):hover,
        .main-mixer-panel-group .presets button:nth-of-type(14).active {
            background: rgba(90,255,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(15) {
            background: rgba(150,255,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(15):hover,
        .main-mixer-panel-group .presets button:nth-of-type(15).active {
            background: rgba(150,255,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(16) {
            background: rgba(210,255,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(16):hover,
        .main-mixer-panel-group .presets button:nth-of-type(16).active {
            background: rgba(210,255,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(17) {
            background: rgba(255,230,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(17):hover,
        .main-mixer-panel-group .presets button:nth-of-type(17).active {
            background: rgba(255,230,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(18) {
            background: rgba(255,170,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(18):hover,
        .main-mixer-panel-group .presets button:nth-of-type(18).active {
            background: rgba(255,170,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(19) {
            background: rgba(255,110,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(19):hover,
        .main-mixer-panel-group .presets button:nth-of-type(19).active {
            background: rgba(255,110,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(20) {
            background: rgba(255,50,0,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(20):hover,
        .main-mixer-panel-group .presets button:nth-of-type(20).active {
            background: rgba(255,50,0,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(21) {
            background: rgba(255,0,10,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(21):hover,
        .main-mixer-panel-group .presets button:nth-of-type(21).active {
            background: rgba(255,0,10,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(22) {
            background: rgba(255,0,70,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(22):hover,
        .main-mixer-panel-group .presets button:nth-of-type(22).active {
            background: rgba(255,0,70,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(23) {
            background: rgba(255,0,130,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(23):hover,
        .main-mixer-panel-group .presets button:nth-of-type(23).active {
            background: rgba(255,0,130,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(24) {
            background: rgba(255,0,190,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(24):hover,
        .main-mixer-panel-group .presets button:nth-of-type(24).active {
            background: rgba(255,0,190,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(25) {
            background: rgba(255,0,250,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(25):hover,
        .main-mixer-panel-group .presets button:nth-of-type(25).active {
            background: rgba(255,0,250,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(26) {
            background: rgba(210,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(26):hover,
        .main-mixer-panel-group .presets button:nth-of-type(26).active {
            background: rgba(210,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(27) {
            background: rgba(150,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(27):hover,
        .main-mixer-panel-group .presets button:nth-of-type(27).active {
            background: rgba(150,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(28) {
            background: rgba(90,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(28):hover,
        .main-mixer-panel-group .presets button:nth-of-type(28).active {
            background: rgba(90,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(29) {
            background: rgba(30,0,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(29):hover,
        .main-mixer-panel-group .presets button:nth-of-type(29).active {
            background: rgba(30,0,255,1);
        }
        .main-mixer-panel-group .presets button:nth-of-type(30) {
            background: rgba(0,30,255,0.2);
        }
        .main-mixer-panel-group .presets button:nth-of-type(30):hover,
        .main-mixer-panel-group .presets button:nth-of-type(30).active {
            background: rgba(0,30,255,1);
        }

        #mirror-output-cycle-mode:disabled {
            opacity: 1;
        }

        #mirror-output-cycle-mode:disabled:hover {
            color: #8d8d8d;
        }

        #mirror-output-cycle-mode:not(:disabled).clip {
            background: #23e648;
            color: black;
        }

        #mirror-output-cycle-mode:not(:disabled).bleed {
            background: #e62323;
            color: white;
        }

        select {
            padding: 10px;
            width: 100%;
            background: black;
            color: #b2c2ad;
            border: solid 1px #1a2019;
            outline: none;
            border-radius: 2px;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 11px;
            cursor: pointer;
        }

        input[type=range] {
            height: 39px;
            -webkit-appearance: none;
            margin: 10px 0;
            width: 100%;
            background: transparent;
        }

        input[type=range]:focus {
            outline: none;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            animate: 0.2s;
            box-shadow: 0px 0px 0px #000000;
            background: #000000;
            border-radius: 5px;
            border: 1px solid #202d2a;
        }

        input[type=range]::-webkit-slider-thumb {
            box-shadow: 0px 0px 0px #828282;
            border: 1px solid #474e46;
            height: 32px;
            width: 11px;
            border-radius: 3px;
            /* background: #1c1c1c; */
            background: #ff8700;
            cursor: pointer;
            -webkit-appearance: none;
            margin-top: -13px;
        }

        input[type=range]:focus::-webkit-slider-runnable-track {
            background: #000000;
        }

        input[type=range]::-moz-range-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            animate: 0.2s;
            box-shadow: 0px 0px 0px #000000;
            background: #000000;
            border-radius: 5px;
            border: 1px solid #8A8A8A;
        }

        input[type=range]::-moz-range-thumb {
            box-shadow: 0px 0px 0px #828282;
            border: 1px solid #8A8A8A;
            height: 32px;
            width: 11px;
            border-radius: 3px;
            background: #DADADA;
            cursor: pointer;
        }

        input[type=range]::-ms-track {
            width: 100%;
            height: 8px;
            cursor: pointer;
            animate: 0.2s;
            background: transparent;
            border-color: transparent;
            color: transparent;
        }

        input[type=range]::-ms-fill-lower {
            background: #000000;
            border: 1px solid #8A8A8A;
            border-radius: 10px;
            box-shadow: 0px 0px 0px #000000;
        }

        input[type=range]::-ms-fill-upper {
            background: #000000;
            border: 1px solid #8A8A8A;
            border-radius: 10px;
            box-shadow: 0px 0px 0px #000000;
        }

        input[type=range]::-ms-thumb {
            margin-top: 1px;
            box-shadow: 0px 0px 0px #828282;
            border: 1px solid #8A8A8A;
            height: 32px;
            width: 11px;
            border-radius: 3px;
            background: #DADADA;
            cursor: pointer;
        }

        input[type=range]:focus::-ms-fill-lower {
            background: #000000;
        }

        input[type=range]:focus::-ms-fill-upper {
            background: #000000;
        }

        input[type=range]:disabled {
            opacity: 0.2;
        }

        .dropdowns {
            display: flex;
            gap: 10px;
        }

        .dropdowns group {
            width: 100%;
        }

        .dropdowns label {
            margin-bottom: 7px;
            display: block;
            opacity: 1;
            color: #8a9e8b;
            font-size: 9px;
            text-transform: uppercase;
            font-weight: 600;
            margin-left: 4px;
        }

        .deck-alpha {
            position: absolute;
            transform: rotate(-90deg);
        }

        #sliders-container {
            padding: 0 90px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 25px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #000000;
            -webkit-transition: .4s;
            transition: .4s;
            border-radius: 2px;
            border: 1px solid #202d2a;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 21px;
            width: 21px;
            left: 0px;
            bottom: 0px;
            background-color: #1c1c1c;
            -webkit-transition: .4s;
            transition: .4s;
            border: 1px solid #474e46;
            border-radius: 2px;
        }

        input:checked + .slider {
            background-color: #838e76;
            border: 1px solid #fff;
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(25px);
            -ms-transform: translateX(25px);
            transform: translateX(25px);
        }

        .input-label {
            margin-bottom: 7px;
            display: block;
            opacity: 1;
            color: #8a9e8b;
            font-size: 9px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .input-label sub {
            display: block;
            margin-top: 4px;
            opacity: 0.4;
        }

        .inline-input {
            display: inline-block;
            vertical-align: top;
            padding: 5px 15px 10px 0;
            
            position: relative;
        }

        .flex-grid[data-columns="1"] .inline-input {
            flex: 0 0 100%;
        }

        .flex-grid[data-columns="2"] .inline-input {
            flex: 0 0 50%;
        }

        .flex-grid[data-columns="3"] .inline-input {
            flex: 0 0 33.333333%;
        }

        .flex-grid[data-columns="4"] .inline-input {
            flex: 0 0 25%;
        }

        .inline-field-group {
            display: inline;
            border-right: solid 1px #1f1e1e;
            width: 100%;
        }

        .inline-field-group:last-of-type {
            border-right: none;
        }

        .flex {
            display: flex;
            gap: 15px;
        }

        .flex .inline-input.w100 {
            width: 100%;
        }

        fieldset {
            border-top: solid 1px #1f1e1e;
            padding: 17px 0;
        }

        fieldset .heading,
        .main-mixer-panel-group .heading {
            margin-bottom: 7px;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 14px;
            color: #313b30;
        }

        .visual-settings,
        .main-mixer-panel {
            gap: 12px;
            display: flex;
            flex-direction: column;
            flex: 1 1 auto;
            overflow-y: auto;
        }

        .visual-settings span.value {
            position: absolute;
            top: 5px;
            right: 16px;
            color: #dc892a;
            font-size: 9px;
            text-transform: uppercase;
            font-weight: 600;

            background: #0d0d0d;
            box-sizing: border-box;
            border: solid 1px #1a2019;
            padding: 4px 6px;
            line-height: 9px;
            width: 60px;
            text-align: right;
            top: -1px;
        }

        /* .visual-settings fieldset group {
            display: flex;
            justify-content: space-between;
        } */

        .visual-settings input[type=range] {
            margin: 0;
            /* height: 30px; */
        }

        /* .visual-settings input[type=range]::-webkit-slider-thumb {
            height: 21px;
            width: 7px;
            margin-top: -8px;
        } */

        .visual-settings > div > div:first-of-type fieldset {
            border-top: none;
            padding-top: 0;
        }

        .visual-settings button {
            margin-top: 1px;
        }

        /* input[type="color"] {
            -webkit-appearance: none;
            border: none;
            width: 32px;
            height: 32px;
        }
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        input[type="color"]::-webkit-color-swatch {
            border: none;
        } */

        ::-webkit-scrollbar {
            width:2px
        }
        ::-webkit-scrollbar-track {
            background:#404040;
            border-radius:0px
        }
        ::-webkit-scrollbar-thumb {
            background:#cccccc;
            border-radius:0px
        }

        .hide {
            display: none;
        }

        .flex-grid {
            display: flex;
            flex-wrap: wrap;
        }

        .main-mixer-panel-group .flex-grid {
            gap: 10px;
            margin-top: 10px;
        }

        .flex-grid button {
            flex-basis: calc(33.33333333% - 6.6666666px);
            margin: 0;
        }

        .color-meter {
            background: black;
            display: block;
            width: 100%;
            height: 7px;
            border-radius: 2px;
            
            position: relative;
            top: 16px;
        }

        .color-meter.red {
            border: 1px solid #935353;
        }

        .color-meter.green {
            border: 1px solid #629353;
        }

        .color-meter.blue {
            border: 1px solid #535993;
        }

        .color-meter.red > div {
            background: red;
            display: block;
            width: 58%;
            height: 5px;
            border-radius: 2px;
            top: 0;
            position: absolute;
            left: 0;
        }

        .color-meter.green > div {
            background: green;
            display: block;
            width: 58%;
            height: 5px;
            border-radius: 2px;
            top: 0;
            position: absolute;
            left: 0;
        }

        .color-meter.blue > div {
            background: blue;
            display: block;
            width: 58%;
            height: 5px;
            border-radius: 2px;
            top: 0;
            position: absolute;
            left: 0;
        }

    </style>
</head>

<body>
    <div id="hydra">
        <section id="deck-screens" class="section">
            <div class="column">
                <div class="deck-screen"><canvas id="deck-1-canvas" class="canvas"></canvas></div>
            </div>
            <div class="column">
                <div class="deck-screen">
                    <canvas id="mixed-canvas" class="canvas"></canvas>
                    <canvas id="mirror-mixed-canvas" class="canvas mirror-canvas"></canvas>
                </div>
            </div>
            <div class="column">
                <div class="deck-screen"><canvas id="deck-2-canvas" class="canvas"></canvas></div>
            </div>
        </section>
        <section class="section">
            <div class="column">
                <div class="lcd-screen">
                    <span class="readout">Deck 1</span>
                    <span class="readout"><span class="label">Alpha:</span> <span class="value" data-deck-1-alpha-display></span></span></span>
                </div>
            </div>
            <div class="column">
                <div class="lcd-screen">
                    <span class="readout">Output</span>
                    <span class="readout"><span class="label">Crossfader:</span> <span id="crossfader-display">D1 1.0000 D2 1.0000</span></span>
                    <span class="readout"><span class="label">BPM:</span> <span class="value" data-bpm-display>130.05</span></span>
                </div>
            </div>
            <div class="column">
                <div class="lcd-screen">
                    <span class="readout">Deck 2</span>
                    <span class="readout"><span class="label">Alpha:</span> <span class="value" data-deck-2-alpha-display></span></span>
                </div>
            </div>
        </section>
        <section id="dropdowns" class="section">
            <div class="column dropdowns">
                <group>
                    <label>Visual</label>
                    <select class="visual-selector" data-deck="1">
                        <option value="quark" selected>Quark</option>
                        <option value="neuromute">Neuromute</option>
                        <option value="lockdown">Lockdown</option>
                    </select>
                </group>
                <button class="reset" data-deck="1">⭮</button>
            </div>
            <div class="column dropdowns">
                <button class="raise-to-top raised" data-deck="1">↥</button>
                <group>
                    <label>Mode</label>
                    <select id="composition-mode-selector">
                        <option value="color-burn">color-burn</option>
                        <option value="color-dodge">color-dodge</option>
                        <option value="color">color</option>
                        <option value="copy">copy</option>
                        <option value="darken">darken</option>
                        <option value="destination-atop">destination-atop</option>
                        <option value="destination-in">destination-in</option>
                        <option value="destination-out">destination-out</option>
                        <option value="destination-over">destination-over</option>
                        <option value="difference">difference</option>
                        <option value="exclusion">exclusion</option>
                        <option value="hard-light">hard-light</option>
                        <option value="hue">hue</option>
                        <option value="lighten">lighten</option>
                        <option value="lighter">lighter</option>
                        <option value="luminosity">luminosity</option>
                        <option value="multiply">multiply</option>
                        <option value="overlay" selected>overlay</option>
                        <option value="saturation">saturation</option>
                        <option value="screen">screen</option>
                        <option value="soft-light">soft-light</option>
                        <option value="source-atop">source-atop</option>
                        <option value="source-in">source-in</option>
                        <option value="source-out">source-out</option>
                        <option value="source-over">source-over</option>
                        <option value="xor">xor</option>
                    </select>
                </group>
                <button class="raise-to-top" data-deck="2">↥</button>
            </div>
            <div class="column dropdowns">
                <group>
                    <label>Visual</label>
                    <select class="visual-selector" data-deck="2">
                        <option value="quark">Quark</option>
                        <option value="neuromute">Neuromute</option>
                        <option value="lockdown">Lockdown</option>
                        <option value="pink" selected>Pink</option>
                    </select>
                </group>
                <button class="reset" data-deck="2">⭮</button>
            </div>
        </section>
        <section class="section extend">
            <div class="column">
                <div class="visual-settings" data-deck="1">
                    <div data-visual="quark" data-deck="1" class="hide">
                        <div>
                            <fieldset>
                                <div class="heading">Enabled</div>
                                <group>
                                    <div class="inline-input">
                                        <span class="input-label">Outer Circle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="outer-circle-enabled" checked data-deck="1" data-visual="quark" data-variable="outerCircleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Middle Circle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="middle-circle-enabled" checked data-deck="1" data-visual="quark" data-variable="middleCircleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Inner Circle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="inner-circle-enabled" checked data-deck="1" data-visual="quark" data-variable="innerCircleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">4-point Circles</span>
                                        <label class="switch">
                                            <input type="checkbox" class="four-point-circles-enabled" checked data-deck="1" data-visual="quark" data-variable="fourPointCirclesEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Large Triangle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="large-triangle-enabled" checked data-deck="1" data-visual="quark" data-variable="largeTriangleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Small Triangle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="small-triangle-enabled" checked data-deck="1" data-visual="quark" data-variable="smallTriangleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Color</div>
                                <group>
                                    <div class="inline-input">
                                        <span class="input-label">Outer Circle</span>
                                        <input type="color" class="outer-circle-color" value="#ff0000" data-deck="1" data-visual="quark" data-variable="outerCircleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Middle Circle</span>
                                        <input type="color" class="middle-circle-color" value="#ff0000" data-deck="1" data-visual="quark" data-variable="middleCircleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Inner Circle</span>
                                        <input type="color" class="inner-circle-color" value="#000000" data-deck="1" data-visual="quark" data-variable="innerCircleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">4-point Circles</span>
                                        <input type="color" class="four-point-circles-color" value="#ff0000" data-deck="1" data-visual="quark" data-variable="fourPointCirclesColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Large Triangle</span>
                                        <input type="color" class="large-triangle-color" value="#ff0000" data-deck="1" data-visual="quark" data-variable="largeTriangleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Small Triangle</span>
                                        <input type="color" class="small-triangle-color" value="#ffa500" data-deck="1" data-visual="quark" data-variable="smallTriangleColor" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Alpha</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Outer Circle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="outer-circle-alpha" min="0" max="1" step="0.01" value="1" data-deck="1" data-visual="quark" data-variable="outerCircleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Middle Circle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="middle-circle-alpha" min="0" max="1" step="0.01" value="1" data-deck="1" data-visual="quark" data-variable="middleCircleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Inner Circle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="inner-circle-alpha" min="0" max="1" step="0.01" value="1" data-deck="1" data-visual="quark" data-variable="innerCircleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">4-point Circles</span>
                                        <span class="value">1</span>
                                        <input type="range" class="four-point-circles-alpha" min="0" max="1" step="0.01" value="1" data-deck="1" data-visual="quark" data-variable="fourPointCirclesAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Large Triangle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="large-triangle-alpha" min="0" max="1" step="0.01" value="1" data-deck="1" data-visual="quark" data-variable="largeTriangleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Small Triangle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="small-triangle-alpha" min="0" max="1" step="0.01" value="1" data-deck="1" data-visual="quark" data-variable="smallTriangleAlpha" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Cycle Color</div>
                                    <group>
                                        <div class="inline-input">
                                            <span class="input-label">4-point Circles</span>
                                            <label class="switch">
                                                <input type="checkbox" class="four-point-circles-cycle-color" checked data-deck="1" data-visual="quark" data-variable="fourPointCirclesCycleColor" data-randomise>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Large Triangle</span>
                                            <label class="switch">
                                                <input type="checkbox" class="large-triangle-cycle-color" checked data-deck="1" data-visual="quark" data-variable="largeTriangleCycleColor" data-randomise>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Small Triangle</span>
                                            <label class="switch">
                                                <input type="checkbox" class="small-triangle-cycle-color" checked data-deck="1" data-visual="quark" data-variable="smallTriangleCycleColor" data-randomise>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </group>
                                </div>
                                <div class="inline-field-group">
                                    <div class="heading">Cycle Interval</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">4-point Circles</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="1" data-visual="quark" data-variable="fourPointCirclesCycleInterval" data-randomise>
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="inline-field-group">
                                    <div class="heading">Cycle Frequency</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Red <sub>Large Triangle</sub></span>
                                            <span class="value">1200</span>
                                            <input type="range" class="large-triangle-cycle-frequency-r" min="0" max="5000" step="1" value="1200" data-deck="1" data-visual="quark" data-variable="largeTriangleCycleFrequencyR" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Green <sub>Large Triangle</sub></span>
                                            <span class="value">1800</span>
                                            <input type="range" class="large-triangle-cycle-frequency-g" min="0" max="5000" step="1" value="1800" data-deck="1" data-visual="quark" data-variable="largeTriangleCycleFrequencyG" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Blue <sub>Large Triangle</sub></span>
                                            <span class="value">2400</span>
                                            <input type="range" class="large-triangle-cycle-frequency-b" min="0" max="5000" step="1" value="2400" data-deck="1" data-visual="quark" data-variable="largeTriangleCycleFrequencyB" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Red <sub>Small Triangle</sub></span>
                                            <span class="value">1</span>
                                            <input type="range" class="small-triangle-cycle-frequency-r" min="0" max="5" step="0.1" value="1" data-deck="1" data-visual="quark" data-variable="smallTriangleCycleFrequencyR" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Green <sub>Small Triangle</sub></span>
                                            <span class="value">1</span>
                                            <input type="range" class="small-triangle-cycle-frequency-g" min="0" max="5" step="0.1" value="1" data-deck="1" data-visual="quark" data-variable="smallTriangleCycleFrequencyG" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Blue <sub>Small Triangle</sub></span>
                                            <span class="value">1</span>
                                            <input type="range" class="small-triangle-cycle-frequency-b" min="0" max="5" step="0.1" value="1" data-deck="1" data-visual="quark" data-variable="smallTriangleCycleFrequencyB" data-randomise>
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="inline-field-group">
                                    <div class="heading">Rotation</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Degree <sub>Large Triangle</sub></span>
                                            <span class="value">0</span>
                                            <input type="range" class="large-triangle-degree" min="0" max="1000" value="0" data-deck="1" data-visual="quark" data-variable="largeTriangleDegree" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Mod <sub>Large Triangle</sub></span>
                                            <span class="value">0</span>
                                            <input type="range" class="large-triangle-degree-increment" step="0.001" min="0" max="1000" value="0" data-deck="1" data-visual="quark" data-variable="largeTriangleDegreeIncrement" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Limit <sub>Large Triangle</sub></span>
                                            <span class="value">360</span>
                                            <input type="range" class="large-triangle-degree-restart" min="0" max="1000" value="360" data-deck="1" data-visual="quark" data-variable="largeTriangleDegreeRestart" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Max <sub>Large Triangle</sub></span>
                                            <span class="value">15</span>
                                            <input type="range" class="large-triangle-degree-wave-max" min="0" max="1000" value="15" data-deck="1" data-visual="quark" data-variable="largeTriangleDegreeWaveMax" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Amplitude <sub>Large Triangle</sub></span>
                                            <span class="value">30</span>
                                            <input type="range" class="large-triangle-degree-wave-amplitude" min="0" max="1000" value="30" data-deck="1" data-visual="quark" data-variable="largeTriangleDegreeWaveAmplitude" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Frequency <sub>Large Triangle</sub></span>
                                            <span class="value">12000</span>
                                            <input type="range" class="large-triangle-degree-wave-frequency" min="0" max="24000" value="12000" data-deck="1" data-visual="quark" data-variable="largeTriangleDegreeWaveFrequency" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                            <fieldset></fieldset>
                                <div class="inline-field-group">
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Degree <sub>Small Triangle</sub></span>
                                            <span class="value">0</span>
                                            <input type="range" class="small-triangle-degree" min="0" max="1000" value="0" data-deck="1" data-visual="quark" data-variable="smallTriangleDegree" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Mod <sub>Small Triangle</sub></span>
                                            <span class="value">10</span>
                                            <input type="range" class="small-triangle-degree-increment" step="1" min="0" max="1000" value="10" data-deck="1" data-visual="quark" data-variable="smallTriangleDegreeIncrement" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Limit <sub>Small Triangle</sub></span>
                                            <span class="value">360</span>
                                            <input type="range" class="small-triangle-degree-restart" min="0" max="1000" value="360" data-deck="1" data-visual="quark" data-variable="smallTriangleDegreeRestart" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Max <sub>Small Triangle</sub></span>
                                            <span class="value">15</span>
                                            <input type="range" class="small-triangle-degree-wave-max" min="0" max="1000" value="15" data-deck="1" data-visual="quark" data-variable="smallTriangleDegreeWaveMax" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Amplitude <sub>Small Triangle</sub></span>
                                            <span class="value">30</span>
                                            <input type="range" class="small-triangle-degree-wave-amplitude" min="0" max="1000" value="30" data-deck="1" data-visual="quark" data-variable="smallTriangleDegreeWaveAmplitude" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Frequency <sub>Small Triangle</sub></span>
                                            <span class="value">12000</span>
                                            <input type="range" class="small-triangle-degree-wave-frequency" min="0" max="24000" value="12000" data-deck="1" data-visual="quark" data-variable="smallTriangleDegreeWaveFrequency" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                            <div>
                                <fieldset>
                                    <div class="inline-field-group">
                                        <div class="heading">Sync</div>
                                        <group class="flex-grid">
                                            <div class="inline-input">
                                                <span class="input-label">Sync</span>
                                                <label class="switch">
                                                    <input type="checkbox" class="small-triangle-sync" checked data-deck="1" data-visual="quark" data-variable="smallTriangleSync" data-randomise>
                                                    <span class="slider"></span>
                                                </label>
                                            </div>
                                        </group>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Scale</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">&nbsp;</span>
                                            <span class="value">0.75</span>
                                            <input type="range" class="scale" min="0" max="30" step="0.05" value="0.75" data-deck="1" data-visual="quark" data-variable="scale">
                                        </div>
                                    </group>
                                </div>
                                <div class="inline-field-group">
                                    <div class="heading">Radius</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">&nbsp;</span>
                                            <span class="value">200</span>
                                            <input type="range" class="radius" min="0" max="1000" step="1" value="200" data-deck="1" data-visual="quark" data-variable="radius">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Offset</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">4-point Circles</span>
                                            <span class="value">50</span>
                                            <input type="range" class="four-point-circles-offset" min="-200" max="200" step="1" value="50" data-deck="1" data-visual="quark" data-variable="fourPointCirclesOffset">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div data-visual="neuromute" data-deck="1" class="hide">
                        <div>
                            <fieldset>
                                <div class="heading">Reactor</div>
                                <group class="flex-grid" data-columns="4">
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeX">Width</button>
                                    </div>
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Shift</button>
                                    </div>
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Alpha</button>
                                    </div>
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Amp</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Cause</div>
                                <group class="flex-grid" data-columns="2">
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeX">Average</button>
                                    </div>
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Percentage</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Effect</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Addition</button>
                                    </div>
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Subtraction</button>
                                    </div>
                                    <div class="inline-input">
                                        <button data-deck="1" data-visual="neuromute" data-variable="translateModeY">Multiply</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Arc</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Min Width</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="596" step="1" value="1" data-deck="1" data-visual="neuromute" data-variable="minWidth">
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Width Mode</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="8" step="1" value="1" data-deck="1" data-visual="neuromute" data-variable="widthMode">
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Mode</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="12" step="1" value="1" data-deck="1" data-visual="neuromute" data-variable="mode">
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Line</div>
                                <group class="flex-grid" data-columns="2">
                                    <div class="inline-input">
                                        <span class="input-label">Width</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="20" step="1" value="1" data-deck="1" data-visual="neuromute" data-variable="lineWidth">
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Mode</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="3" step="1" value="1" data-deck="1" data-visual="neuromute" data-variable="lineMode">
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Trail</div>
                                <group class="flex-grid" data-columns="2">
                                    <div class="inline-input">
                                        <span class="input-label">Length</span>
                                        <span class="value">155</span>
                                        <input type="range" min="5" max="500" step="1" value="155" data-deck="1" data-visual="neuromute" data-variable="modulo">
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Modulo</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="20" step="1" value="1" data-deck="1" data-visual="neuromute" data-variable="modulo">
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Fill</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Frequency</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div>
                                            <div class="inline-input">
                                                <span class="input-label">Enabled</span>
                                                <label class="switch">
                                                    <input type="checkbox" class="four-point-circles-cycle-color" checked data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleColor">
                                                    <span class="slider"></span>
                                                </label>
                                            </div>
                                            <div class="inline-input">
                                                <span class="input-label">Random</span>
                                                <label class="switch">
                                                    <input type="checkbox" class="large-triangle-cycle-color" checked data-deck="2" data-visual="quark" data-variable="largeTriangleCycleColor">
                                                    <span class="slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Dash</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Length</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Gap</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Enabled</span>
                                            <label class="switch">
                                                <input type="checkbox" class="four-point-circles-cycle-color" checked data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleColor">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Colour - Global</div>
                                    <group class="flex-grid" data-columns="4">
                                        <div class="inline-input">
                                            <span class="input-label">Mode</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Shift</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Alpha</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Amp</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Red</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Shift</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Level</span>
                                            <div class="color-meter red"><div></div></div>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Alpha</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Green</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Shift</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Level</span>
                                            <div class="color-meter green"><div></div></div>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Alpha</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Blue</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Shift</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Level</span>
                                            <div class="color-meter blue"><div></div></div>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Alpha</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div data-visual="lockdown" data-deck="1" class="hide">
                        <div>
                            <fieldset>
                                <div class="heading">Translate Mode</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">X Axis</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="translateModeX" data-options="center,wave" data-randomise>center</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Y Axis</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="translateModeY" data-options="center,wave" data-randomise>center</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Triangle</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Count</span>
                                        <span class="value">40</span>
                                        <input type="range" min="1" max="100" step="1" value="40" data-deck="1" data-visual="lockdown" data-variable="triangleCount" data-randomise data-trigger="enableForceUpdate">
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Scale</span>
                                        <span class="value">1</span>
                                        <input type="range" min="0" max="6" step="0.001" value="1" data-deck="1" data-visual="lockdown" data-variable="triangleScale" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Line Width</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="20" step="1" value="1" data-deck="1" data-visual="lockdown" disabled data-variable="lineWidth" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Scale Mode</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="triangleScaleMode" data-options="lin,log" data-randomise data-trigger="enableForceUpdate">lin</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Style</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="triangleStyle" data-options="fill,stroke" data-randomise data-trigger="updateDisabledUIComponents">fill</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Rotation</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Type</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="rotationType" data-options="alternate,normal,reverse" data-randomise>alternate</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">From</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="rotationFrom" data-options="inside-out,outside-in" data-randomise>inside-out</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Degree Multplier</span>
                                        <span class="value">0.5</span>
                                        <input type="range" min="0" max="5" step="0.00001" value="0.5" data-deck="1" data-visual="lockdown" data-variable="degreeMultiplier" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Max Rotation</span>
                                        <span class="value">120</span>
                                        <input type="range" min="0" max="360" step="1" value="120" data-deck="1" data-visual="lockdown" data-variable="maxRotation" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Frequencies</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Frequency Control</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="frequencyControl" data-options="single,split" data-randomise data-trigger="updateDisabledUIComponents">single</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Frequency</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySingle" min="0.00001" max="0.00025" step="0.00001" value="0.0001" data-deck="1" data-visual="lockdown" data-variable="frequency" data-randomise>
                                    </div>
                                </group>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Frequency X/Y</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySplit" min="0.00001" max="0.00045" step="0.00001" value="0.0001" data-deck="1" data-visual="lockdown" disabled data-variable="frequencyMovement" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Frequency Rotation</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySplit" min="0.00001" max="0.00025" step="0.00001" value="0.0001" data-deck="1" data-visual="lockdown" disabled data-variable="frequencyRotation" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Frequency Color</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySplit" min="0.00001" max="0.00050" step="0.00001" value="0.0001" data-deck="1" data-visual="lockdown" disabled data-variable="frequencyColor" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Color</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Foreround Mode</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="colorMode" data-options="normal,cycle" data-randomise>normal</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Background Mode</span>
                                        <button data-deck="1" data-visual="lockdown" data-variable="bgColorMode" data-options="black,match,opposite" data-randomise>black</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                    </div>
                </div>
                <div class="button-group">
                    <div><button class="pink">Send</button></div>
                    <div><button class="blue">Receive</button></div>
                    <div><button class="yellow" data-deck="1" data-save-preset>Save</button></div>
                    <div><button class="green randomise" class="green" data-deck="1">Randomise</button></div>
                </div>
                <div class="button-group">
                    <div><button class="orange">React</button></div>
                    <div><button>Keyboard</button></div>
                    <div><button>Guide</button></div>
                    <div><button class="red" data-deck="1" data-revert-preset>Revert</button></div>
                </div>
            </div>
            <div class="column">
                <div id="sliders-container">
                    <div id="sliders">
                        <input type="range" min="0" max="1" value="1" step="0.0001" class="deck-alpha" data-deck="1" data-variable="alpha" data-precision="4">
                        <input type="range" min="0" max="1" value="1" step="0.0001" class="deck-alpha" data-deck="2" data-variable="alpha" data-precision="4">
                    </div>
                    <div class="main-mixer-panel">
                        <div><img src="tmp.png" style="width: 100%;"></div>
                        <div class="button-group">
                            <div><button id="kaleidoscope-output-toggle">Kaleidoscope</button></div>
                            <!-- <div><input id="kaleidoscope-output-count" type="range" min="0" max="12" value="0" step="1"></div> -->
                            <div><button id="mirror-output-toggle">Mirror</button></div>
                            <div><button id="mirror-output-cycle-mode" class="clip" disabled>Clip</button></div>
                        </div>
                        <div class="button-group">
                            <button class="auto" data-deck="1">Auto</button>
                            <button id="launch">Launch</button>
                            <button class="auto" data-deck="2">Auto</button>
                        </div>
                        <div class="extend">
                            <div class="main-mixer-panel-group">
                                <div class="deck-1">
                                    <label class="heading">Presets</label>
                                    <button data-deck="1">Import</button>
                                    <button data-deck="1">Export</button>
                                    <div class="flex-grid presets">
                                        <button class="preset" data-deck="1" data-preset="1" disabled>1</button>
                                        <button class="preset" data-deck="1" data-preset="2" disabled>2</button>
                                        <button class="preset" data-deck="1" data-preset="3" disabled>3</button>
                                        <button class="preset" data-deck="1" data-preset="4" disabled>4</button>
                                        <button class="preset" data-deck="1" data-preset="5" disabled>5</button>
                                        <button class="preset" data-deck="1" data-preset="6" disabled>6</button>
                                        <button class="preset" data-deck="1" data-preset="7" disabled>7</button>
                                        <button class="preset" data-deck="1" data-preset="8" disabled>8</button>
                                        <button class="preset" data-deck="1" data-preset="9" disabled>9</button>
                                        <button class="preset" data-deck="1" data-preset="10" disabled>10</button>
                                        <button class="preset" data-deck="1" data-preset="11" disabled>11</button>
                                        <button class="preset" data-deck="1" data-preset="12" disabled>12</button>
                                        <button class="preset" data-deck="1" data-preset="13" disabled>13</button>
                                        <button class="preset" data-deck="1" data-preset="14" disabled>14</button>
                                        <button class="preset" data-deck="1" data-preset="15" disabled>15</button>
                                        <button class="preset" data-deck="1" data-preset="16" disabled>16</button>
                                        <button class="preset" data-deck="1" data-preset="17" disabled>17</button>
                                        <button class="preset" data-deck="1" data-preset="18" disabled>18</button>
                                        <button class="preset" data-deck="1" data-preset="19" disabled>19</button>
                                        <button class="preset" data-deck="1" data-preset="20" disabled>20</button>
                                        <button class="preset" data-deck="1" data-preset="21" disabled>21</button>
                                        <button class="preset" data-deck="1" data-preset="22" disabled>22</button>
                                        <button class="preset" data-deck="1" data-preset="23" disabled>23</button>
                                        <button class="preset" data-deck="1" data-preset="24" disabled>24</button>
                                        <button class="preset" data-deck="1" data-preset="25" disabled>25</button>
                                        <button class="preset" data-deck="1" data-preset="26" disabled>26</button>
                                        <button class="preset" data-deck="1" data-preset="27" disabled>27</button>
                                        <button class="preset" data-deck="1" data-preset="28" disabled>28</button>
                                        <button class="preset" data-deck="1" data-preset="29" disabled>29</button>
                                        <button class="preset" data-deck="1" data-preset="30" disabled>30</button>
                                    </div>
                                    <div class="button-group">
                                        <div><button data-deck="1" data-previous-preset>◄</button></div>
                                        <div><button data-deck="1" data-next-preset>►</button></div>
                                    </div>
                                </div>
                                <div></div>
                                <div class="deck-2">
                                    <label class="heading">Presets</label>
                                    <button data-deck="2">Import</button>
                                    <button data-deck="2">Export</button>
                                    <div class="flex-grid presets">
                                        <button class="preset" data-deck="2" data-preset="1" disabled>1</button>
                                        <button class="preset" data-deck="2" data-preset="2" disabled>2</button>
                                        <button class="preset" data-deck="2" data-preset="3" disabled>3</button>
                                        <button class="preset" data-deck="2" data-preset="4" disabled>4</button>
                                        <button class="preset" data-deck="2" data-preset="5" disabled>5</button>
                                        <button class="preset" data-deck="2" data-preset="6" disabled>6</button>
                                        <button class="preset" data-deck="2" data-preset="7" disabled>7</button>
                                        <button class="preset" data-deck="2" data-preset="8" disabled>8</button>
                                        <button class="preset" data-deck="2" data-preset="9" disabled>9</button>
                                        <button class="preset" data-deck="2" data-preset="10" disabled>10</button>
                                        <button class="preset" data-deck="2" data-preset="11" disabled>11</button>
                                        <button class="preset" data-deck="2" data-preset="12" disabled>12</button>
                                        <button class="preset" data-deck="2" data-preset="13" disabled>13</button>
                                        <button class="preset" data-deck="2" data-preset="14" disabled>14</button>
                                        <button class="preset" data-deck="2" data-preset="15" disabled>15</button>
                                        <button class="preset" data-deck="2" data-preset="16" disabled>16</button>
                                        <button class="preset" data-deck="2" data-preset="17" disabled>17</button>
                                        <button class="preset" data-deck="2" data-preset="18" disabled>18</button>
                                        <button class="preset" data-deck="2" data-preset="19" disabled>19</button>
                                        <button class="preset" data-deck="2" data-preset="20" disabled>20</button>
                                        <button class="preset" data-deck="2" data-preset="21" disabled>21</button>
                                        <button class="preset" data-deck="2" data-preset="22" disabled>22</button>
                                        <button class="preset" data-deck="2" data-preset="23" disabled>23</button>
                                        <button class="preset" data-deck="2" data-preset="24" disabled>24</button>
                                        <button class="preset" data-deck="2" data-preset="25" disabled>25</button>
                                        <button class="preset" data-deck="2" data-preset="26" disabled>26</button>
                                        <button class="preset" data-deck="2" data-preset="27" disabled>27</button>
                                        <button class="preset" data-deck="2" data-preset="28" disabled>28</button>
                                        <button class="preset" data-deck="2" data-preset="29" disabled>29</button>
                                        <button class="preset" data-deck="2" data-preset="30" disabled>30</button>
                                    </div>
                                    <div class="button-group">
                                        <div><button data-deck="2" data-previous-preset>◄</button></div>
                                        <div><button data-deck="2" data-next-preset>►</button></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="crossfader-section">
                            <div id="crossfader-container">
                                <input id="crossfader" type="range" min="-1" max="1" value="0" step="0.0001">
                            </div>
                        </div>
                    </div>
                    <div class="button-group">
                        <div><button id="record" class="red">Record</button></div>
                    </div>
                    <div class="button-group">
                        <div><button>Tap</button></div>
                        <div><button class="on">Sync</button></div>
                        <div><button>Assign</button></div>
                    </div>
                </div>
            </div>
            <div class="column">
                <div class="visual-settings" data-deck="2">
                    <div data-visual="quark" data-deck="2" class="hide">
                        <div>
                            <fieldset>
                                <div class="heading">Enabled</div>
                                <group>
                                    <div class="inline-input">
                                        <span class="input-label">Outer Circle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="outer-circle-enabled" checked data-deck="2" data-visual="quark" data-variable="outerCircleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Middle Circle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="middle-circle-enabled" checked data-deck="2" data-visual="quark" data-variable="middleCircleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Inner Circle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="inner-circle-enabled" checked data-deck="2" data-visual="quark" data-variable="innerCircleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">4-point Circles</span>
                                        <label class="switch">
                                            <input type="checkbox" class="four-point-circles-enabled" checked data-deck="2" data-visual="quark" data-variable="fourPointCirclesEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Large Triangle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="large-triangle-enabled" checked data-deck="2" data-visual="quark" data-variable="largeTriangleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Small Triangle</span>
                                        <label class="switch">
                                            <input type="checkbox" class="small-triangle-enabled" checked data-deck="2" data-visual="quark" data-variable="smallTriangleEnabled" data-randomise>
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Color</div>
                                <group>
                                    <div class="inline-input">
                                        <span class="input-label">Outer Circle</span>
                                        <input type="color" class="outer-circle-color" value="#ff0000" data-deck="2" data-visual="quark" data-variable="outerCircleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Middle Circle</span>
                                        <input type="color" class="middle-circle-color" value="#ff0000" data-deck="2" data-visual="quark" data-variable="middleCircleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Inner Circle</span>
                                        <input type="color" class="inner-circle-color" value="#000000" data-deck="2" data-visual="quark" data-variable="innerCircleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">4-point Circles</span>
                                        <input type="color" class="four-point-circles-color" value="#ff0000" data-deck="2" data-visual="quark" data-variable="fourPointCirclesColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Large Triangle</span>
                                        <input type="color" class="large-triangle-color" value="#ff0000" data-deck="2" data-visual="quark" data-variable="largeTriangleColor" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Small Triangle</span>
                                        <input type="color" class="small-triangle-color" value="#ffa500" data-deck="2" data-visual="quark" data-variable="smallTriangleColor" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Alpha</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Outer Circle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="outer-circle-alpha" min="0" max="1" step="0.01" value="1" data-deck="2" data-visual="quark" data-variable="outerCircleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Middle Circle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="middle-circle-alpha" min="0" max="1" step="0.01" value="1" data-deck="2" data-visual="quark" data-variable="middleCircleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Inner Circle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="inner-circle-alpha" min="0" max="1" step="0.01" value="1" data-deck="2" data-visual="quark" data-variable="innerCircleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">4-point Circles</span>
                                        <span class="value">1</span>
                                        <input type="range" class="four-point-circles-alpha" min="0" max="1" step="0.01" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Large Triangle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="large-triangle-alpha" min="0" max="1" step="0.01" value="1" data-deck="2" data-visual="quark" data-variable="largeTriangleAlpha" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Small Triangle</span>
                                        <span class="value">1</span>
                                        <input type="range" class="small-triangle-alpha" min="0" max="1" step="0.01" value="1" data-deck="2" data-visual="quark" data-variable="smallTriangleAlpha" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Cycle Color</div>
                                    <group>
                                        <div class="inline-input">
                                            <span class="input-label">4-point Circles</span>
                                            <label class="switch">
                                                <input type="checkbox" class="four-point-circles-cycle-color" checked data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleColor" data-randomise>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Large Triangle</span>
                                            <label class="switch">
                                                <input type="checkbox" class="large-triangle-cycle-color" checked data-deck="2" data-visual="quark" data-variable="largeTriangleCycleColor" data-randomise>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Small Triangle</span>
                                            <label class="switch">
                                                <input type="checkbox" class="small-triangle-cycle-color" checked data-deck="2" data-visual="quark" data-variable="smallTriangleCycleColor" data-randomise>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </group>
                                </div>
                                <div class="inline-field-group">
                                    <div class="heading">Cycle Interval</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">4-point Circles</span>
                                            <span class="value">1</span>
                                            <input type="range" class="four-point-circles-cycle-interval" min="0" max="30" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="fourPointCirclesCycleInterval" data-randomise>
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="inline-field-group">
                                    <div class="heading">Cycle Frequency</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Red <sub>Large Triangle</sub></span>
                                            <span class="value">1200</span>
                                            <input type="range" class="large-triangle-cycle-frequency-r" min="0" max="5000" step="1" value="1200" data-deck="2" data-visual="quark" data-variable="largeTriangleCycleFrequencyR" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Green <sub>Large Triangle</sub></span>
                                            <span class="value">1800</span>
                                            <input type="range" class="large-triangle-cycle-frequency-g" min="0" max="5000" step="1" value="1800" data-deck="2" data-visual="quark" data-variable="largeTriangleCycleFrequencyG" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Blue <sub>Large Triangle</sub></span>
                                            <span class="value">2400</span>
                                            <input type="range" class="large-triangle-cycle-frequency-b" min="0" max="5000" step="1" value="2400" data-deck="2" data-visual="quark" data-variable="largeTriangleCycleFrequencyB" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Red <sub>Small Triangle</sub></span>
                                            <span class="value">1</span>
                                            <input type="range" class="small-triangle-cycle-frequency-r" min="0" max="5" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="smallTriangleCycleFrequencyR" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Green <sub>Small Triangle</sub></span>
                                            <span class="value">1</span>
                                            <input type="range" class="small-triangle-cycle-frequency-g" min="0" max="5" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="smallTriangleCycleFrequencyG" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Blue <sub>Small Triangle</sub></span>
                                            <span class="value">1</span>
                                            <input type="range" class="small-triangle-cycle-frequency-b" min="0" max="5" step="0.1" value="1" data-deck="2" data-visual="quark" data-variable="smallTriangleCycleFrequencyB" data-randomise>
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="inline-field-group">
                                    <div class="heading">Rotation</div>
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Degree <sub>Large Triangle</sub></span>
                                            <span class="value">0</span>
                                            <input type="range" class="large-triangle-degree" min="0" max="1000" value="0" data-deck="2" data-visual="quark" data-variable="largeTriangleDegree" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Mod <sub>Large Triangle</sub></span>
                                            <span class="value">0</span>
                                            <input type="range" class="large-triangle-degree-increment" step="0.001" min="0" max="1000" value="0" data-deck="2" data-visual="quark" data-variable="largeTriangleDegreeIncrement" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Limit <sub>Large Triangle</sub></span>
                                            <span class="value">360</span>
                                            <input type="range" class="large-triangle-degree-restart" min="0" max="1000" value="360" data-deck="2" data-visual="quark" data-variable="largeTriangleDegreeRestart" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Max <sub>Large Triangle</sub></span>
                                            <span class="value">15</span>
                                            <input type="range" class="large-triangle-degree-wave-max" min="0" max="1000" value="15" data-deck="2" data-visual="quark" data-variable="largeTriangleDegreeWaveMax" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Amplitude <sub>Large Triangle</sub></span>
                                            <span class="value">30</span>
                                            <input type="range" class="large-triangle-degree-wave-amplitude" min="0" max="1000" value="30" data-deck="2" data-visual="quark" data-variable="largeTriangleDegreeWaveAmplitude" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Frequency <sub>Large Triangle</sub></span>
                                            <span class="value">12000</span>
                                            <input type="range" class="large-triangle-degree-wave-frequency" min="0" max="24000" value="12000" data-deck="2" data-visual="quark" data-variable="largeTriangleDegreeWaveFrequency" data-randomise data-dispatch-event="largeTriangleDegreeInput">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                            <fieldset></fieldset>
                                <div class="inline-field-group">
                                    <group class="flex-grid" data-columns="3">
                                        <div class="inline-input">
                                            <span class="input-label">Degree <sub>Small Triangle</sub></span>
                                            <span class="value">0</span>
                                            <input type="range" class="small-triangle-degree" min="0" max="1000" value="0" data-deck="2" data-visual="quark" data-variable="smallTriangleDegree" data-randomise>
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Mod <sub>Small Triangle</sub></span>
                                            <span class="value">10</span>
                                            <input type="range" class="small-triangle-degree-increment" step="1" min="0" max="1000" value="10" data-deck="2" data-visual="quark" data-variable="smallTriangleDegreeIncrement" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Limit <sub>Small Triangle</sub></span>
                                            <span class="value">360</span>
                                            <input type="range" class="small-triangle-degree-restart" min="0" max="1000" value="360" data-deck="2" data-visual="quark" data-variable="smallTriangleDegreeRestart" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Max <sub>Small Triangle</sub></span>
                                            <span class="value">15</span>
                                            <input type="range" class="small-triangle-degree-wave-max" min="0" max="1000" value="15" data-deck="2" data-visual="quark" data-variable="smallTriangleDegreeWaveMax" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Wave Amplitude <sub>Small Triangle</sub></span>
                                            <span class="value">30</span>
                                            <input type="range" class="small-triangle-degree-wave-amplitude" min="0" max="1000" value="30" data-deck="2" data-visual="quark" data-variable="smallTriangleDegreeWaveAmplitude" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                        <div class="inline-input">
                                            <span class="input-label">Degree Frequency <sub>Small Triangle</sub></span>
                                            <span class="value">12000</span>
                                            <input type="range" class="small-triangle-degree-wave-frequency" min="0" max="24000" value="12000" data-deck="2" data-visual="quark" data-variable="smallTriangleDegreeWaveFrequency" data-randomise data-dispatch-event="smallTriangleDegreeInput">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                            <div>
                                <fieldset>
                                    <div class="inline-field-group">
                                        <div class="heading">Sync</div>
                                        <group class="flex-grid">
                                            <div class="inline-input">
                                                <span class="input-label">Sync</span>
                                                <label class="switch">
                                                    <input type="checkbox" class="small-triangle-sync" checked data-deck="2" data-visual="quark" data-variable="smallTriangleSync" data-randomise>
                                                    <span class="slider"></span>
                                                </label>
                                            </div>
                                        </group>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Scale</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">&nbsp;</span>
                                            <span class="value">0.75</span>
                                            <input type="range" class="scale" min="0" max="30" step="0.05" value="0.75" data-deck="2" data-visual="quark" data-variable="scale">
                                        </div>
                                    </group>
                                </div>
                                <div class="inline-field-group">
                                    <div class="heading">Radius</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">&nbsp;</span>
                                            <span class="value">200</span>
                                            <input type="range" class="radius" min="0" max="1000" step="1" value="200" data-deck="2" data-visual="quark" data-variable="radius">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset class="flex">
                                <div class="inline-field-group">
                                    <div class="heading">Offset</div>
                                    <group>
                                        <div class="inline-input w100">
                                            <span class="input-label">4-point Circles</span>
                                            <span class="value">50</span>
                                            <input type="range" class="four-point-circles-offset" min="-200" max="200" step="1" value="50" data-deck="2" data-visual="quark" data-variable="fourPointCirclesOffset">
                                        </div>
                                    </group>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                    <div data-visual="neuromute" data-deck="2" class="hide">Neuromute</div>
                    <div data-visual="lockdown" data-deck="2" class="hide">
                        <div>
                            <fieldset>
                                <div class="heading">Translate Mode</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">X Axis</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="translateModeX" data-options="center,wave" data-randomise>center</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Y Axis</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="translateModeY" data-options="center,wave" data-randomise>center</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Triangle</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Count</span>
                                        <span class="value">40</span>
                                        <input type="range" min="1" max="100" step="1" value="40" data-deck="2" data-visual="lockdown" data-variable="triangleCount" data-randomise data-trigger="enableForceUpdate">
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Scale</span>
                                        <span class="value">1</span>
                                        <input type="range" min="0" max="6" step="0.001" value="1" data-deck="2" data-visual="lockdown" data-variable="triangleScale" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Line Width</span>
                                        <span class="value">1</span>
                                        <input type="range" min="1" max="20" step="1" value="1" data-deck="2" data-visual="lockdown" disabled data-variable="lineWidth" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Scale Mode</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="triangleScaleMode" data-options="lin,log" data-randomise data-trigger="enableForceUpdate">lin</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Style</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="triangleStyle" data-options="fill,stroke" data-randomise data-trigger="updateDisabledUIComponents">fill</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Rotation</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Type</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="rotationType" data-options="alternate,normal,reverse" data-randomise>alternate</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">From</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="rotationFrom" data-options="inside-out,outside-in" data-randomise>inside-out</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Degree Multplier</span>
                                        <span class="value">0.5</span>
                                        <input type="range" min="0" max="5" step="0.00001" value="0.5" data-deck="2" data-visual="lockdown" data-variable="degreeMultiplier" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Max Rotation</span>
                                        <span class="value">120</span>
                                        <input type="range" min="0" max="360" step="1" value="120" data-deck="2" data-visual="lockdown" data-variable="maxRotation" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Frequencies</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Frequency Control</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="frequencyControl" data-options="single,split" data-randomise data-trigger="updateDisabledUIComponents">single</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Frequency</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySingle" min="0.00001" max="0.00025" step="0.00001" value="0.0001" data-deck="2" data-visual="lockdown" data-variable="frequency" data-randomise>
                                    </div>
                                </group>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Frequency X/Y</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySplit" min="0.00001" max="0.00045" step="0.00001" value="0.0001" data-deck="2" data-visual="lockdown" disabled data-variable="frequencyMovement" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Frequency Rotation</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySplit" min="0.00001" max="0.00025" step="0.00001" value="0.0001" data-deck="2" data-visual="lockdown" disabled data-variable="frequencyRotation" data-randomise>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Frequency Color</span>
                                        <span class="value">0.0001</span>
                                        <input type="range" class="frequencySplit" min="0.00001" max="0.00050" step="0.00001" value="0.0001" data-deck="2" data-visual="lockdown" disabled data-variable="frequencyColor" data-randomise>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                        <div>
                            <fieldset>
                                <div class="heading">Color</div>
                                <group class="flex-grid" data-columns="3">
                                    <div class="inline-input">
                                        <span class="input-label">Foreround Mode</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="colorMode" data-options="normal,cycle" data-randomise>normal</button>
                                    </div>
                                    <div class="inline-input">
                                        <span class="input-label">Background Mode</span>
                                        <button data-deck="2" data-visual="lockdown" data-variable="bgColorMode" data-options="black,match,opposite" data-randomise>black</button>
                                    </div>
                                </group>
                            </fieldset>
                        </div>
                    </div>
                    <div data-visual="pink" data-deck="2" class="hide"></div>
                </div>
                <div class="button-group">
                    <div><button class="pink" disabled>Send</button></div>
                    <div><button class="blue" disabled>Receive</button></div>
                    <div><button class="yellow" data-deck="2" data-save-preset disabled>Save</button></div>
                    <div><button class="green randomise" class="green" data-deck="2">Randomise</button></div>
                </div>
                <div class="button-group">
                    <div><button class="orange" disabled>React</button></div>
                    <div><button disabled>Keyboard</button></div>
                    <div><button disabled>Guide</button></div>
                    <div><button class="red" data-deck="2" data-revert-preset>Revert</button></div>
                </div>
            </div>
        </section>
    </div>
    <audio id="audio" crossorigin="anonymous"></audio>
    <script>
        window.hydra = (function(){
            return {
                boot: function() {
                    this.markup.init(() => {
                        this.mixedCanvas = document.getElementById('mixed-canvas');
                        this.mixedCtx = this.mixedCanvas.getContext('2d');

                        this.mirrorMixedCanvas = document.getElementById('mirror-mixed-canvas');
                        this.mirrorMixedCtx = this.mirrorMixedCanvas.getContext('2d');

                        this.centerX;
                        this.centerY;

                        this.mouseX;
                        this.mouseY;

                        this.audio.init();

                        // this.scale = 0.75;

                        this.mirrorEnabled = false;
                        this.mirrorMode = 'clip';

                        this.deck1 = this.deck.init(1, 'quark');
                        this.deck2 = this.deck.init(2, 'pink');

                        this.crossfader.init();
                        this.composition.init();
                        this.effects.init();
                        this.handlers.init();

                        this.helpers.detectSizes();

                        this.composition.setMode('overlay');

                        window.onresize = this.detectSizes;
                        window.onmousemove = (e) => {
                            this.mouseX = e.clientX;
                            this.mouseY = e.clientY;
                        };
                        window.requestAnimationFrame(this.render);
                    });
                },
                markup: {
                    init: function(callback) {
                        // insert base markup here

                        this.injectRendererRelatedMarkup(callback);
                    },
                    injectRendererRelatedMarkup: function(callback) {
                        // insert renderer-related markup here

                        callback()
                    }
                },
                deck: {
                    init: function(id, visual) {
                        let deck = {};
                        deck.id = id;
                        deck.canvas = document.getElementById(`deck-${deck.id}-canvas`);
                        deck.ctx = deck.canvas.getContext('2d');
                        deck.crossfaderAlpha = 1;
                        deck.raised = id == 1;
                        deck.scale = 0.75;
                        deck.current = null;
                        deck.presetBtns = document.querySelectorAll(`.preset[data-deck="${deck.id}"]`);
                        deck.presetPrevBtn = document.querySelector(`[data-deck="${deck.id}"][data-previous-preset]`);
                        deck.presetNextBtn = document.querySelector(`[data-deck="${deck.id}"][data-next-preset]`);
                        deck.presetSaveBtn = document.querySelector(`[data-deck="${deck.id}"][data-save-preset]`);
                        deck.presetRevertBtn = document.querySelector(`[data-deck="${deck.id}"][data-revert-preset]`);

                        deck.presetBtns.forEach(btn => {
                            btn.addEventListener('click', function(e) {
                                if (!e.target.disabled) {
                                    deck.presets.select(e.target.dataset.preset);
                                }
                            });
                        });

                        deck.presetPrevBtn.addEventListener('click', function(e) {
                            deck.presets.previous();
                        });

                        deck.presetNextBtn.addEventListener('click', function(e) {
                            deck.presets.next();
                        });

                        deck.presetSaveBtn.addEventListener('click', function(e) {
                            deck.presets.save();
                        });

                        deck.presetRevertBtn.addEventListener('click', function(e) {
                            deck.presets.select(deck.presets.current);
                        });

                        deck.visual = {
                            select: function(visual) {
                                deck.ctx.setTransform(1, 0, 0, 1, 0, 0);
                                deck.ctx.clearRect(0, 0, deck.canvas.width, deck.canvas.height);

                                this.current = visual;
                                deck.current = deck[visual];

                                const visualSettingsPanels = document.querySelectorAll(`[data-deck="${deck.id}"].visual-settings > div`);
                                visualSettingsPanels.forEach(panel => {
                                    panel.className = (panel.dataset.deck == deck.id) && (panel.dataset.visual == deck.visual.current) ? 'show' : 'hide';
                                });

                                deck.presets.update();
                            },
                            reset: function() {
                                if (deck.current.presets && deck.current.presets.length) {
                                    deck.presets.select(1);
                                }
                                //hydra.deck1.lockdown.triangleScaleInput.value = 1; hydra.deck1.lockdown.triangleScaleInput.dispatchEvent(new Event('input', { bubbles: true }));
                            }
                        }

                        deck.readouts = {
                            init: function() {
                                const variables = document.querySelectorAll(`[data-deck="${deck.id}"][data-variable]`);
                                variables.forEach(variable => {
                                    const displayEl = document.querySelector(`[data-deck-${deck.id}-${variable.dataset.variable}-display]`);
                                    deck[variable.dataset.variable] = variable.value;
                                    if (displayEl) {
                                        displayEl.innerText = hydra.helpers.formatValue(variable.value, variable.dataset.precision || 2);
                                    }
                                    variable.addEventListener('input', function(e) {
                                        deck[variable.dataset.variable] = variable.value;
                                        if (displayEl) {
                                            displayEl.innerText = hydra.helpers.formatValue(variable.value, variable.dataset.precision || 2);
                                        }
                                    });
                                });
                            }
                        }

                        deck.controls = {
                            init: function() {
                                const randomiseBtn = document.querySelector(`[data-deck="${deck.id}"].randomise`);
                                randomiseBtn.addEventListener('click', function(e) {
                                    hydra.helpers.randomise(deck);
                                });

                                const visualSelector = document.querySelector(`[data-deck="${deck.id}"].visual-selector`);
                                visualSelector.addEventListener('input', function(e) {
                                    deck.visual.select(e.target.value);
                                });
                            }
                        }

                        deck.presets = {
                            update: function() {
                                this.clear();

                                if (deck.current.presets && deck.current.presets.length) {
                                    deck.current.presets.forEach((preset, i) => {
                                        deck.presetBtns[i].disabled = false;
                                        if (i == 0) {
                                            deck.presetBtns[i].classList.add('active');
                                        }
                                    });
                                } else {
                                    console.log('no presets found')
                                }
                            },
                            select: function(preset) {
                                deck.presetBtns.forEach(btn => {
                                    btn.classList.remove('active');
                                });
                                deck.presetBtns[preset-1].classList.add('active');
                                this.current = parseInt(preset);

                                deck.ctx.setTransform(1, 0, 0, 1, 0, 0);
                                deck.ctx.clearRect(0, 0, deck.canvas.width, deck.canvas.height);

                                const selectedPreset = deck.current.presets[preset-1];
                                for (const option in selectedPreset) {
                                    const input = document.querySelector(`[data-visual="${deck.visual.current}"][data-deck="${deck.id}"][data-variable="${option}"]`);

                                    if (!input) {
                                        console.log('breaking')
                                    }
                                    if (!input) break;

                                    if (input.type == 'number' || input.type == 'range' || input.type == 'color') {
                                        input.value = selectedPreset[option];
                                        input.dispatchEvent(new Event('input', { bubbles: true }));
                                    } else if (input.type == 'checkbox') {
                                        input.checked = selectedPreset[option];
                                        input.dispatchEvent(new Event('input', { bubbles: true }));
                                    } else if (input.type == 'submit') {
                                        deck.current[option] = selectedPreset[option];
                                        input.textContent = selectedPreset[option];
                                    }

                                    if (typeof deck.current.updateDisabledUIComponents == 'function') {
                                        deck.current.updateDisabledUIComponents();
                                    }
                                }
                            },
                            current: 1,
                            previous: function() {
                                if (deck.current.presets && deck.current.presets.length) {
                                    const previous = this.current == 1 ? deck.current.presets.length : (this.current - 1);
                                    this.select(previous);
                                }
                            },
                            next: function() {
                                if (deck.current.presets && deck.current.presets.length) {
                                    const next = this.current == deck.current.presets.length ? 1 : (this.current + 1);
                                    this.select(next);
                                }
                            },
                            clear: function() {
                                deck.presetBtns.forEach(btn => {
                                    btn.className = 'preset';
                                    btn.disabled = true;
                                });
                            },
                            save: function() {
                                const presetConfiguration = {};
                                deck.current.inputs.forEach(input => {
                                    if (input.type == 'number' || input.type == 'range' || input.type == 'color') {
                                        presetConfiguration[input.dataset.variable] = input.value;
                                    } else if (input.type == 'checkbox') {
                                        presetConfiguration[input.dataset.variable] = input.checked;
                                    } else if (input.type == 'submit') {
                                        presetConfiguration[input.dataset.variable] = input.textContent;
                                    }
                                });
                                console.log(JSON.stringify(presetConfiguration));
                            }
                        }

                        deck.render = () => {
                            deck.current.render();
                        }
                        
                        deck.readouts.init();

                        for (const renderer in hydra.renderers) {
                            deck = hydra.renderers[renderer].init(deck);
                        }

                        deck.controls.init();

                        deck.visual.select(visual);
                        
                        return deck;
                    }
                },
                renderers: {},
                renderer: {
                    init: function(deck, name, presets) {
                        deck[name] = {};
                        deck[name] = this.importPresets(deck, name, presets);

                        const inputs = document.querySelectorAll(`[data-deck="${deck.id}"][data-visual="${name}"][data-variable]`);
                        inputs.forEach(input => {

                            deck[name][`${input.dataset.variable}Input`] = input;

                            if (input.type == 'checkbox') {
                                deck[name][input.dataset.variable] = input.checked;

                                input.addEventListener('input', function(e) {
                                    deck[name][input.dataset.variable] = e.target.checked;
                                });
                            } else if (input.type == 'number' || input.type == 'range') {
                                const isInt = (Number.isInteger(input.step) || input.step === undefined);

                                deck[name][input.dataset.variable] = isInt
                                    ? parseInt(input.value)
                                    : parseFloat(input.value);

                                input.addEventListener('input', function(e) {
                                    deck[name][input.dataset.variable] = isInt
                                        ? parseInt(e.target.value)
                                        : parseFloat(e.target.value);
                                    e.target.parentElement.querySelector('.value').textContent = e.target.value;

                                    hydra.helpers.dispatchEvent(deck, name, e.target.dataset.dispatchEvent, 'input')
                                    hydra.helpers.triggerFunction(deck, name, e.target.dataset.trigger);
                                });
                            } else if (input.type == 'color') {
                                deck[name][input.dataset.variable] = hydra.helpers.hexToRgb(input.value);

                                input.addEventListener('input', function(e) {
                                    deck[name][input.dataset.variable] = hydra.helpers.hexToRgb(e.target.value);
                                });
                            } else if (input.type =='submit') {
                                deck[name][input.dataset.variable] = input.textContent;
                                input.options = input.dataset.options?.split(',') || []

                                input.addEventListener('click', function(e) {
                                    if (input.options.length) {
                                        const index = input.options.indexOf(e.target.textContent);
                                        const option = input.options[index+1] !== undefined ? input.options[index+1] : input.options[0];

                                        deck[name][input.dataset.variable] = option;
                                        input.textContent = option;
                                    }

                                    hydra.helpers.dispatchEvent(deck, name, e.target.dataset.dispatchEvent, 'input')
                                    hydra.helpers.triggerFunction(deck, name, e.target.dataset.trigger);
                                });
                            }
                        });

                        deck[name].inputs = [...inputs].filter(item => (typeof item.dataset.randomise !== 'undefined'));

                        return deck[name];
                    },
                    importPresets: function(deck, name, json) {
                        return fetch(json)
                            .then((response) => response.json())
                            .then((responseData) => responseData.presets)
                            .then(response => (deck[name].presets = response))
                            .then(response => {
                                if (deck.visual.current == name) {
                                    deck.visual.select(name);
                                }
                            });
                    }
                },
                crossfader: {
                    init: function() {
                        this.display = document.getElementById('crossfader-display');
                        this.input = document.getElementById('crossfader');

                        this.calculateAlphas = (crossfaderValue) => {
                            crossfaderValue = parseFloat(crossfaderValue);
                            hydra.deck1.crossfaderAlpha = 1 - crossfaderValue <= 1 ? 1 - crossfaderValue : 1;
                            hydra.deck2.crossfaderAlpha = 1 + crossfaderValue <= 1 ? 1 + crossfaderValue : 1;
                        };
                        
                        this.updateDisplay = () => {
                            this.display.innerText = `D1 ${hydra.helpers.formatValue(hydra.deck1.crossfaderAlpha, 4)} -.- D2 ${hydra.helpers.formatValue(hydra.deck2.crossfaderAlpha, 4)}`;
                        };

                        this.input.addEventListener('input', function(e) {
                            hydra.crossfader.calculateAlphas(e.target.value);
                            hydra.crossfader.updateDisplay();
                        });

                        this.updateDisplay();

                        return crossfader;
                    }
                },
                composition: {
                    init: function() {
                        this.setMode = (mode) => {
                            hydra.mixedCtx.globalCompositeOperation = mode;
                        };
                    }
                },
                effects: {
                    init: function() {
                        this.mirror = {}
                        this.mirror.enabled = false;
                        this.mirror.mode = 'clip';
                        this.mirror.toggle = document.getElementById('mirror-output-toggle');
                        this.mirror.modeCycle = document.getElementById('mirror-output-cycle-mode');
                        
                        this.mirror.clipping = {
                            enable: function() {
                                if (!hydra.mixedCanvas.classList.contains('clipped')) {
                                    hydra.mixedCanvas.classList.add('clipped');
                                }
                                if (!hydra.mirrorMixedCanvas.classList.contains('clipped')) {
                                    hydra.mirrorMixedCanvas.classList.add('clipped');
                                }
                            },
                            disable: function() {
                                if (hydra.mixedCanvas.classList.contains('clipped')) {
                                    hydra.mixedCanvas.classList.remove('clipped');
                                }
                                if (hydra.mirrorMixedCanvas.classList.contains('clipped')) {
                                    hydra.mirrorMixedCanvas.classList.remove('clipped');
                                }
                            }
                        };

                        this.mirror.toggle.addEventListener('click', function(e) {
                            e.target.classList.toggle('on');
                            hydra.effects.mirror.enabled = e.target.classList.contains('on');
                            if (!hydra.effects.mirror.enabled) {
                                hydra.mirrorMixedCtx.clearRect(0, 0, hydra.mixedCanvas.width, hydra.mixedCanvas.height);
                                hydra.effects.mirror.modeCycle.disabled = true;
                                hydra.effects.mirror.clipping.disable();
                            } else {
                                hydra.effects.mirror.modeCycle.disabled = false;

                                if (hydra.effects.mirror.modeCycle.innerText == 'CLIP') {
                                    hydra.effects.mirror.clipping.enable();
                                } else {
                                    hydra.effects.mirror.clipping.disable();
                                }
                            }
                        });

                        this.mirror.modeCycle.addEventListener('click', function(e) {
                            if (e.target.innerText == 'CLIP') {
                                e.target.innerText = 'bleed';
                                e.target.className = 'bleed';
                                hydra.effects.mirror.clipping.disable();
                            } else {
                                e.target.innerText = 'clip';
                                e.target.className = 'clip';
                                hydra.effects.mirror.clipping.enable();
                            }
                        });
                    }
                },
                handlers: {
                    init: function() {
                        const deckResetBtns = document.querySelectorAll('.reset');
                        deckResetBtns.forEach(btn => {
                            btn.addEventListener('click', function(e) {
                                hydra[`deck${e.target.dataset.deck}`].visual.reset();
                            });
                        })

                        const raiseToTopBtns = document.querySelectorAll('.raise-to-top');
                        raiseToTopBtns.forEach(btn => {
                            btn.addEventListener('click', function(e) {
                                raiseToTopBtns.forEach(button => {
                                    button.classList.remove('raised');
                                });
                                e.target.classList.add('raised');
                                if (e.target.dataset.deck == 1) {
                                    hydra.deck1.raised = true;
                                    hydra.deck2.raised = false;
                                } else {
                                    hydra.deck1.raised = false;
                                    hydra.deck2.raised = true;
                                }
                            });
                        });

                        const modeInput = document.getElementById('composition-mode-selector');
                        modeInput.addEventListener('input', function(e) {
                            hydra.mixedCtx.globalCompositeOperation = e.target.value;
                        });
                    }
                },
                render: function() {
                    hydra.deck1.ctx.globalAlpha = hydra.deck1.alpha;
                    hydra.deck2.ctx.globalAlpha = hydra.deck2.alpha;

                    hydra.mixedCtx.clearRect(0, 0, hydra.mixedCanvas.width, hydra.mixedCanvas.height);

                    hydra.deck1.render();
                    hydra.deck2.render();

                    if (!hydra.deck1.raised) {
                        hydra.mixedCtx.globalAlpha = hydra.deck1.crossfaderAlpha;
                        hydra.mixedCtx.drawImage(hydra.deck1.canvas, 0, 0);
                        hydra.mixedCtx.globalAlpha = 1;
                    }

                    hydra.mixedCtx.globalAlpha = hydra.deck2.crossfaderAlpha;
                    hydra.mixedCtx.drawImage(hydra.deck2.canvas, 0, 0);
                    hydra.mixedCtx.globalAlpha = 1;

                    if (hydra.deck1.raised) {
                        hydra.mixedCtx.globalAlpha = hydra.deck1.crossfaderAlpha;
                        hydra.mixedCtx.drawImage(hydra.deck1.canvas, 0, 0);
                        hydra.mixedCtx.globalAlpha = 1;
                    }

                    if (hydra.effects.mirror.enabled) {
                        hydra.mirrorMixedCtx.clearRect(0, 0, hydra.mixedCanvas.width, hydra.mixedCanvas.height);
                        hydra.mirrorMixedCtx.drawImage(hydra.mixedCanvas, 0, 0);
                        // hydra.mirrorMixedCtx.translate(hydra.centerX, hydra.centerY);
                        // hydra.mirrorMixedCtx.scale(-1, 1);
                        // hydra.mirrorMixedCtx.translate(-hydra.centerX, -hydra.centerY);
                    }
                    
                    window.requestAnimationFrame(hydra.render);
                },
                audio: {
                    init: function() {
                        // navigator.mediaDevices.getUserMedia({
                        //     audio: true
                        // }).then(this.configureMediaProcessing);
                    },
                    configureMediaProcessing: function(stream) {
                        hydra.audio.context = new AudioContext();
                        hydra.audio.source = hydra.audio.context.createMediaStreamSource(stream);
                        hydra.audio.processor = hydra.audio.context.createScriptProcessor(1024, 1, 1);
                        hydra.audio.analyser = hydra.audio.context.createAnalyser();

                        hydra.audio.analyser.smoothingTimeConstant = 0.8;
                        hydra.audio.analyser.fftSize = 512;

                        hydra.audio.source.connect(hydra.audio.analyser);
                        hydra.audio.analyser.connect(hydra.audio.processor);
                        hydra.audio.processor.connect(hydra.audio.context.destination);

                        hydra.audio.processor.onaudioprocess = () => {
                            const array = new Uint8Array(hydra.audio.analyser.frequencyBinCount);
                            let values = 0;
                            const length = array.length;

                            hydra.audio.analyser.getByteFrequencyData(array);

                            for (let i = 0; i < length; i++) {
                                values += (array[i]);
                            }

                            audio.average = values / hydra.audio.analyser.frequencyBinCount;
                            audio.percentage = (100 / hydra.audio.analyser.frequencyBinCount) * audio.average;

                            hydra.audio.showLevels();
                        }
                    },
                    showLevels: function() {
                        // audioMeterCtx.clearRect(0, 0, audioMeterCanvas.width, audioMeterCanvas.height);
                        // audioMeterCtx.fillStyle = '#ffa500';
                        // audioMeterCtx.fillRect(1, 600 - (600 * (audio.percentage/100)), 18, 600);
                    }
                },
                helpers: {
                    hexToRgb: function(hex) {
                        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                        return result ? {
                            r: parseInt(result[1], 16),
                            g: parseInt(result[2], 16),
                            b: parseInt(result[3], 16)
                        } : null;
                    },
                    formatValue: function(value, precision) {
                        const n = 10 * (10 * precision);
                        return (Math.round(value * n) / n).toFixed(precision);
                    },
                    detectSizes: function() {
                        //// This is for full size screen - cpu gets hammered at 4k!
                        // hydra.deck1.canvas.width = window.innerWidth;
                        // hydra.deck1.canvas.height = window.innerHeight;

                        // hydra.mixedCanvas.width = window.innerWidth;
                        // hydra.mixedCanvas.height = window.innerHeight;

                        // hydra.deck2.canvas.width = window.innerWidth;
                        // hydra.deck2.canvas.height = window.innerHeight;

                        // hydra.mirrorMixedCanvas.width = window.innerWidth;
                        // hydra.mirrorMixedCanvas.height = window.innerHeight;

                        // hydra.centerX = window.innerWidth/2;
                        // hydra.centerY = window.innerHeight/2;

                        hydra.deck1.canvas.width = hydra.deck1.canvas.getBoundingClientRect().width;
                        hydra.deck1.canvas.height = hydra.deck1.canvas.getBoundingClientRect().height;

                        hydra.mixedCanvas.width = hydra.mixedCanvas.getBoundingClientRect().width;
                        hydra.mixedCanvas.height = hydra.mixedCanvas.getBoundingClientRect().height;

                        hydra.deck2.canvas.width = hydra.deck2.canvas.getBoundingClientRect().width;
                        hydra.deck2.canvas.height = hydra.deck2.canvas.getBoundingClientRect().height;

                        hydra.mirrorMixedCanvas.width = hydra.mirrorMixedCanvas.getBoundingClientRect().width;
                        hydra.mirrorMixedCanvas.height = hydra.mirrorMixedCanvas.getBoundingClientRect().height;

                        hydra.centerX = hydra.deck1.canvas.width/2;
                        hydra.centerY = hydra.deck1.canvas.height/2;

                        const sliderHeight = document.querySelector('.extend').clientHeight - document.getElementById('sliders').clientHeight - 65;

                        document.querySelectorAll('.deck-alpha').forEach((slider, i) => {
                            slider.style.width = `${sliderHeight}px`;
                            slider.style.top = `${sliderHeight/2}px`;
                            if (i == 0) {
                                slider.style.left =`-${sliderHeight/2 - 39 - 15}px`;
                            } else {
                                slider.style.right =`-${sliderHeight/2 - 39 - 15}px`;
                            }
                        });
                    },
                    randomise: function(deck) {
                        let inputs;

                        deck.ctx.setTransform(1, 0, 0, 1, 0, 0);
                        deck.ctx.clearRect(0, 0, deck.canvas.width, deck.canvas.height);

                        const countDecimals = (number) => { 
                            if ((number % 1) != 0) 
                                return number.toString().split(".")[1].length;  
                            return 0;
                        }

                        const randomValue = (min, max, precision) => {
                            if (Math.random() > 0.5) {
                                const number = Math.random() * (max - min + 1) + min;
                                const multiplier = Math.pow(10, precision || 0);
                                return Math.round(number * multiplier) / multiplier;
                            } else {
                                let number = Math.random() * (max - min) + min;
                                number = parseFloat(number.toFixed(countDecimals(precision)));
                                if (precision == 0) {
                                    number = Math.round(number);
                                }
                                return number;
                            }
                        }

                         const randomColor = () => {
                            return '#'+(Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0');
                         }

                        deck.current.inputs.forEach(function(input) {
                            if (Math.random() > 0.25) {
                                if (input.type == 'number' || input.type == 'range') {
                                    const min = parseFloat(input.min) || 0;
                                    const max = parseFloat(input.max) || 1000;
                                    const step = parseFloat(input.step) || 1;
                                    const randomisedValue = randomValue(min, max, step);
                                    input.value = randomisedValue;
                                } else if (input.type == 'checkbox') {
                                    const randomisedValue = randomValue(0, 1, 0);
                                    input.checked = randomisedValue;
                                } else if (input.type == 'color') {
                                    input.value = randomColor();
                                }

                                if (input.type == 'submit') {
                                    input.dispatchEvent(new Event('click', { bubbles: true }));
                                } else {
                                    input.dispatchEvent(new Event('input', { bubbles: true }));
                                }
                            }
                        });
                    },
                    dispatchEvent: function(deck, visual, property, type) {
                        if (property) {
                            deck[visual][property].dispatchEvent(new Event(type, { bubbles: true }));
                        }
                    },
                    triggerFunction: function(deck, visual, fn) {
                        if (fn) {
                            deck[visual][fn]();
                        }
                    }
                }
            }
        })();
    </script>
    <script>
        window.hydra.renderers['quark'] = {
            init: function(deck) {
                deck.quark = window.hydra.renderer.init(deck, 'quark', './js/renderers/quark/presets.json');

                deck.quark.radius = null
                deck.quark.radiusInput.value = deck.quark.radius;

                deck.quark.render = () => {
                    if (deck.quark.radius === null) {
                        deck.quark.radius = (deck.canvas.height/2);
                    }
                    let radius = deck.quark.radius * deck.scale;
                    let time = Date.now();

                    deck.ctx.clearRect(0, 0, deck.canvas.width, deck.canvas.height);

                    if (deck.quark.smallTriangleSync) {
                        deck.quark.smallTriangleDegree = deck.quark.smallTriangleDegree/1000;
                    }
                    
                    deck.quark.largeTriangleDegree += (deck.quark.largeTriangleDegreeIncrement + (deck.quark.largeTriangleDegreeWaveMax/2 + deck.quark.largeTriangleDegreeWaveAmplitude * Math.sin(time/deck.quark.largeTriangleDegreeWaveFrequency)));
                    deck.quark.smallTriangleDegree += deck.quark.smallTriangleDegreeIncrement;
                    
                    if (deck.quark.largeTriangleDegree >= deck.quark.largeTriangleDegreeRestart) deck.quark.largeTriangleDegree = 0;
                    if (deck.quark.smallTriangleDegree >= deck.quark.smallTriangleDegreeRestart) deck.quark.smallTriangleDegree = 0;

                    deck.ctx.translate(hydra.centerX, hydra.centerY);
                    deck.ctx.rotate((Math.PI / 180) * deck.quark.largeTriangleDegree);
                    deck.ctx.translate(-hydra.centerX, -hydra.centerY);

                    if (deck.quark.outerCircleEnabled) {
                        deck.ctx.strokeStyle = `rgba(${deck.quark.outerCircleColor.r}, ${deck.quark.outerCircleColor.g}, ${deck.quark.outerCircleColor.b}, ${deck.quark.outerCircleAlpha})`;
                        deck.ctx.lineWidth = 4;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX, hydra.centerY, radius+100, 0, 2 * Math.PI);
                        deck.ctx.stroke();
                        deck.ctx.closePath();
                    }

                    if (deck.quark.middleCircleEnabled) {
                        deck.ctx.strokeStyle = `rgba(${deck.quark.middleCircleColor.r}, ${deck.quark.middleCircleColor.g}, ${deck.quark.middleCircleColor.b}, ${deck.quark.middleCircleAlpha})`;
                        deck.ctx.lineWidth = 4;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX, hydra.centerY, radius, 0, 2 * Math.PI);
                        deck.ctx.stroke();
                        deck.ctx.closePath();
                    }

                    y = (Math.sqrt(3)/2)*radius;
                    x = (radius * Math.sqrt(3))/2;

                    let r = 255/2 + 255 * Math.sin(time/deck.quark.largeTriangleCycleFrequencyR);
                    let g = 255/2 + 255 * Math.sin(time/deck.quark.largeTriangleCycleFrequencyG);
                    let b = 255/2 + 255 * Math.sin(time/deck.quark.largeTriangleCycleFrequencyB);

                    let color = `rgba(${r}, ${g}, ${b}, ${deck.quark.largeTriangleAlpha})`;

                    if (deck.quark.largeTriangleEnabled) {
                        deck.ctx.fillStyle = deck.quark.largeTriangleCycleColor 
                            ? color 
                            : `rgba(${deck.quark.largeTriangleColor.r}, ${deck.quark.largeTriangleColor.g}, ${deck.quark.largeTriangleColor.b}, ${deck.quark.largeTriangleAlpha})`;
                        deck.ctx.beginPath();
                        deck.ctx.moveTo(hydra.centerX, hydra.centerY-radius);
                        deck.ctx.lineTo(hydra.centerX+x, hydra.centerY+(radius/2));
                        deck.ctx.lineTo(hydra.centerX-x, hydra.centerY+(radius/2));
                        deck.ctx.fill();
                    }
                    
                    if (deck.quark.innerCircleEnabled) {
                        deck.ctx.fillStyle = `rgba(${deck.quark.innerCircleColor.r}, ${deck.quark.innerCircleColor.g}, ${deck.quark.innerCircleColor.b}, ${deck.quark.innerCircleAlpha})`;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX, hydra.centerY, (radius/2), 0, 2 * Math.PI);
                        deck.ctx.fill();
                        deck.ctx.closePath();
                    }

                    deck.ctx.translate(hydra.centerX, hydra.centerY);
                    deck.ctx.rotate( (Math.PI / 180) * -deck.quark.largeTriangleDegree);
                    deck.ctx.translate(-hydra.centerX, -hydra.centerY);
                    
                    deck.ctx.translate(hydra.centerX, hydra.centerY);
                    deck.ctx.rotate( (Math.PI / 180) * deck.quark.smallTriangleDegree);
                    deck.ctx.translate(-hydra.centerX, -hydra.centerY);
                    
                    y = (Math.sqrt(3)/2)*(radius/2);
                    x = ((radius/2) * Math.sqrt(3))/2;

                    r = 255/2 + 255 * Math.sin(time/deck.quark.smallTriangleCycleFrequencyR);
                    g = 255/2 + 255 * Math.sin(time/deck.quark.smallTriangleCycleFrequencyG);
                    b = 255/2 + 255 * Math.sin(time/deck.quark.smallTriangleCycleFrequencyB);

                    color = `rgba(${r}, ${g}, ${b}, ${deck.quark.smallTriangleAlpha})`;

                    if (deck.quark.smallTriangleEnabled) {
                        deck.ctx.fillStyle = deck.quark.smallTriangleCycleColor 
                            ? color 
                            : `rgba(${deck.quark.smallTriangleColor.r}, ${deck.quark.smallTriangleColor.g}, ${deck.quark.smallTriangleColor.b}, ${deck.quark.smallTriangleAlpha})`;
                        deck.ctx.beginPath();
                        deck.ctx.moveTo(hydra.centerX, hydra.centerY-(radius/2));
                        deck.ctx.lineTo(hydra.centerX+x, hydra.centerY+((radius/2)/2));
                        deck.ctx.lineTo(hydra.centerX-x, hydra.centerY+((radius/2)/2));
                        
                        deck.ctx.fill();
                    }

                    if (!deck.quark.smallTriangleSync) {
                        deck.ctx.setTransform(1, 0, 0, 1, 0, 0);
                    }

                    if (deck.quark.fourPointCirclesEnabled) {
                        let timeInSecs = parseInt(time/(deck.quark.fourPointCirclesCycleInterval*1000));

                        deck.ctx.strokeStyle = ((timeInSecs % 4 == 0) && deck.quark.fourPointCirclesCycleColor) 
                            ? `rgba(${r}, ${g}, ${b}, ${deck.quark.fourPointCirclesAlpha})` 
                            : `rgba(${deck.quark.fourPointCirclesColor.r}, ${deck.quark.fourPointCirclesColor.g}, ${deck.quark.fourPointCirclesColor.b}, ${deck.quark.fourPointCirclesAlpha})`;
                        deck.ctx.lineWidth = 4;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX, hydra.centerY - (radius + deck.quark.fourPointCirclesOffset), radius/10, 0, 2 * Math.PI);
                        deck.ctx.stroke();
                        deck.ctx.closePath();

                        deck.ctx.strokeStyle = (((timeInSecs-1) % 4 == 0) && deck.quark.fourPointCirclesCycleColor) 
                            ? `rgba(${r}, ${g}, ${b}, ${deck.quark.fourPointCirclesAlpha})` 
                            : `rgba(${deck.quark.fourPointCirclesColor.r}, ${deck.quark.fourPointCirclesColor.g}, ${deck.quark.fourPointCirclesColor.b}, ${deck.quark.fourPointCirclesAlpha})`;
                        deck.ctx.lineWidth = 4;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX + (radius + deck.quark.fourPointCirclesOffset), hydra.centerY, radius/10, 0, 2 * Math.PI);
                        deck.ctx.stroke();
                        deck.ctx.closePath();

                        deck.ctx.strokeStyle = (((timeInSecs-2) % 4 == 0) && deck.quark.fourPointCirclesCycleColor) 
                            ? `rgba(${r}, ${g}, ${b}, ${deck.quark.fourPointCirclesAlpha})` 
                            : `rgba(${deck.quark.fourPointCirclesColor.r}, ${deck.quark.fourPointCirclesColor.g}, ${deck.quark.fourPointCirclesColor.b}, ${deck.quark.fourPointCirclesAlpha})`;
                        deck.ctx.lineWidth = 4;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX, hydra.centerY + (radius + deck.quark.fourPointCirclesOffset), radius/10, 0, 2 * Math.PI);
                        deck.ctx.stroke();
                        deck.ctx.closePath();

                        deck.ctx.strokeStyle = (((timeInSecs-3) % 4 == 0) && deck.quark.fourPointCirclesCycleColor) 
                            ? `rgba(${r}, ${g}, ${b}, ${deck.quark.fourPointCirclesAlpha})` 
                            : `rgba(${deck.quark.fourPointCirclesColor.r}, ${deck.quark.fourPointCirclesColor.g}, ${deck.quark.fourPointCirclesColor.b}, ${deck.quark.fourPointCirclesAlpha})`;
                        deck.ctx.lineWidth = 4;
                        deck.ctx.beginPath();
                        deck.ctx.arc(hydra.centerX - (radius + deck.quark.fourPointCirclesOffset), hydra.centerY, radius/10, 0, 2 * Math.PI);
                        deck.ctx.stroke();
                        deck.ctx.closePath();
                    }
                };

                return deck;
            }
        };
    </script>
    <script>
        window.hydra.renderers['neuromute'] = {
            init: function(deck) {
                deck.neuromute = window.hydra.renderer.init(deck, 'neuromute', './js/renderers/neuromute/presets.json');

                // deck.neuromute.trails = [];
                // deck.neuromute.counter = 0;
                // deck.neuromute.speed = 0.0001;
                // deck.neuromute.width;
                // deck.neuromute.red = 255;
                // deck.neuromute.green = 255;
                // deck.neuromute.blue = 255;

                // deck.neuromute.canvas.init();
                // deck.neuromute.midi.init();
                // deck.neuromute.audio.init();
                // deck.neuromute.mouse.init();
                // deck.neuromute.keyboard.init();
                // deck.neuromute.knobs.init();
                // deck.neuromute.buttons.init();
                // deck.neuromute.renderer.init();
                // deck.neuromute.storage.init();
                // deck.neuromute.menu.init();
                // deck.neuromute.sequencer.init();

                deck.neuromute.render = () => {

                }

                // deck.neuromute.canvas.init();
                // deck.neuromute.midi.init();
                // deck.neuromute.audio.init();
                // deck.neuromute.mouse.init();
                // deck.neuromute.keyboard.init();
                // deck.neuromute.knobs.init();
                // deck.neuromute.buttons.init();
                // deck.neuromute.renderer.init();
                // deck.neuromute.storage.init();
                // deck.neuromute.menu.init();
                // deck.neuromute.sequencer.init();

                return deck;
            }
        };
    </script>
    <script>
        window.hydra.renderers['lockdown'] = {
            init: function(deck) {
                deck.lockdown = window.hydra.renderer.init(deck, 'lockdown', './js/renderers/lockdown/presets.json');

                deck.lockdown.frequencySingleInput = document.querySelector(`[data-visual="lockdown"][data-deck="${deck.id}"] .frequencySingle`);
                deck.lockdown.frequencySplitInputs = document.querySelectorAll(`[data-visual="lockdown"][data-deck="${deck.id}"] .frequencySplit`);

                deck.lockdown.triangleSize = 10;

                deck.lockdown.updateDisabledUIComponents = () => {
                    if (deck.lockdown.frequencyControl == 'split') {
                        deck.lockdown.frequencySingleInput.disabled = true;
                        deck.lockdown.frequencySplitInputs.forEach(frequencySplitInput => {
                            frequencySplitInput.disabled = false;;
                        });

                        deck.lockdown.frequencyMovement = deck.lockdown.frequencyMovementInput.value;
                        deck.lockdown.frequencyRotation = deck.lockdown.frequencyRotationInput.value;
                        deck.lockdown.frequencyColor = deck.lockdown.frequencyColorInput.value;

                    } else {
                        deck.lockdown.frequencySingleInput.disabled = false;
                        deck.lockdown.frequencySplitInputs.forEach(frequencySplitInput => {
                            frequencySplitInput.disabled = true;
                        });
                    }

                    if (deck.lockdown.triangleStyle == 'fill') {
                        deck.lockdown.lineWidthInput.disabled = true;
                    } else {
                        deck.lockdown.lineWidthInput.disabled = false;
                    }
                };

                deck.lockdown.updateTriangles = () => {
                    deck.lockdown.triangles = [];
                    for (let i = 1; i <= deck.lockdown.triangleCount; i++) {
                        deck.lockdown.triangleScaleMultiplier = deck.lockdown.triangleScaleMode == 'lin' ? 1 : (i/2);
                        deck.lockdown.triangles.push({side: (deck.lockdown.triangleSize * i * deck.lockdown.triangleScaleMultiplier)});
                    }

                    deck.lockdown.triangles = deck.lockdown.triangles.reverse();

                    deck.lockdown.forceUpdate = false;
                };

                deck.lockdown.enableForceUpdate = () => {
                    deck.lockdown.forceUpdate = true;
                }

                deck.lockdown.render = () => {
                    deck.ctx.translate(0, 0);
                    // comment below line out for trails when using transparency
                    deck.ctx.clearRect(0, 0, deck.canvas.width, deck.canvas.height);
                    // add transparent colour here
                    // deck.ctx.fillStyle = deck.lockdown.bgColorMode == 'black' ? '#000' : deck.lockdown.bgColor;
                    deck.ctx.fillStyle = deck.lockdown.bgColorMode == 'black' ? 'rgba(0,0,0,0)' : deck.lockdown.bgColor;
                    deck.ctx.fillRect(0, 0, deck.canvas.width, deck.canvas.height);

                    const totalTriangles = deck.lockdown.triangles.length;

                    deck.lockdown.triangles.forEach(function(triangle, index) {

                        if (deck.lockdown.frequencyControl == 'single') {
                            deck.lockdown.frequencyMovement = deck.lockdown.frequency;
                            deck.lockdown.frequencyRotation = deck.lockdown.frequency;
                            deck.lockdown.frequencyColor = deck.lockdown.frequency;
                        }

                        let triangleSide = triangle.side * deck.lockdown.triangleScale;

                        triangle.height = triangleSide * (Math.sqrt(3)/2);
                        triangle.radius = triangleSide * (Math.sqrt(3)/3);

                        deck.ctx.save();

                        if (deck.lockdown.translateModeX == 'center') {
                            deck.lockdown.translateX = deck.canvas.width/2;
                        } else if (deck.lockdown.translateModeX == 'wave') {
                            deck.lockdown.translateX = deck.canvas.width * (0.5*(1+Math.sin(2 * Math.PI * deck.lockdown.frequencyMovement * (Date.now() - (index * 100)))));
                        } else if (deck.lockdown.translateModeX == 'mouse') {
                            deck.lockdown.translateX = mouseX;
                        }

                        if (deck.lockdown.translateModeY == 'center') {
                            deck.lockdown.translateY = deck.canvas.height/2;
                        } else if (deck.lockdown.translateModeY == 'wave') {
                            deck.lockdown.translateY = deck.canvas.height * (0.5*(1+Math.sin(2 * Math.PI * (deck.lockdown.frequencyMovement / 2) * (Date.now() - (index * 100)))));
                        } else if (deck.lockdown.translateModeY == 'mouse') {
                            deck.lockdown.translateY = mouseY;
                        }

                        deck.ctx.translate(deck.lockdown.translateX, deck.lockdown.translateY);

                        let degree;

                        if (deck.lockdown.rotationFrom == 'inside-out') {
                            degree = (deck.lockdown.degreeMultiplier * (1 + Math.sin(2 * Math.PI * deck.lockdown.frequencyRotation * (Date.now() + (index * 100))))) * deck.lockdown.maxRotation;
                        } else if (deck.lockdown.rotationFrom == 'outside-in') {
                            degree = (deck.lockdown.degreeMultiplier * (1 + Math.sin(2 * Math.PI * deck.lockdown.frequencyRotation * (Date.now() - (index * 100))))) * deck.lockdown.maxRotation;
                        }

                        let rotationInRadians = degree * Math.PI / 180;

                        if (deck.lockdown.rotationType == 'normal') {
                            deck.ctx.rotate(rotationInRadians);
                        } else if (deck.lockdown.rotationType == 'reverse') {
                            deck.ctx.rotate(-rotationInRadians);
                        } else if (deck.lockdown.rotationType == 'alternate') {
                            deck.ctx.rotate(index % 2 == 0 ? rotationInRadians : -rotationInRadians);
                        }

                        deck.ctx.beginPath();
                        deck.ctx.moveTo(0, -triangle.radius);
                        deck.ctx.lineTo(triangleSide/2, (triangle.height - triangle.radius));
                        deck.ctx.lineTo(-triangleSide/2, (triangle.height - triangle.radius));
                        deck.ctx.lineTo(0, -triangle.radius);
                        deck.ctx.closePath();

                        let r, g, b;

                        if (deck.lockdown.colorMode == 'cycle') {

                            r = (0.5 * (1 + Math.sin(2 * Math.PI * (deck.lockdown.frequencyColor * 0.8) * (Date.now() - (index * 10))))) * 212;
                            g = (0.5 * (1 + Math.sin(2 * Math.PI * (deck.lockdown.frequencyColor * 1.2) * (Date.now() - (index * 10))))) * 241;
                            b = (0.5 * (1 + Math.sin(2 * Math.PI * (deck.lockdown.frequencyColor * 1) * (Date.now() - (index * 10))))) * 202;

                            r = r - (totalTriangles - index);
                            g = g - (totalTriangles - index);
                            b = b - (totalTriangles - index);

                        } else {

                            r = (212 - (15*(totalTriangles - index)));
                            g = (241 - (7*(totalTriangles - index)));
                            b = (201 - (6*(totalTriangles - index)));

                        }

                        deck.ctx.shadowOffsetX = 2;
                        deck.ctx.shadowOffsetY = 2;
                        deck.ctx.shadowColor = 'rgba(0,0,0,0.2)';
                        deck.ctx.shadowBlur = 5;

                        if (deck.lockdown.triangleStyle == 'fill') {
                            deck.ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;
                            deck.ctx.fill();
                        } else {
                            deck.ctx.strokeStyle = `rgb(${r}, ${g}, ${b})`;
                            deck.ctx.lineWidth = deck.lockdown.lineWidth;
                            deck.ctx.stroke();
                        }

                        if (index == 1) {
                            if (deck.lockdown.bgColorMode == 'opposite') {
                                r = 255 - r;
                                g = 255 - g;
                                b = 255 - b;
                            }
                            deck.lockdown.bgColor = `rgb(${r}, ${g}, ${b})`;
                        }

                        deck.ctx.restore();

                        // if (deck.lockdown.mirror == 'true') {
                        //     deck.ctx.save();
                        //     deck.ctx.translate(0, 0);
                        //     deck.ctx.scale(-1,1);
                        //     deck.ctx.drawImage(deck.canvas,
                        //         deck.canvas.width/2, 0, deck.canvas.width/2, deck.canvas.height,
                        //         -deck.canvas.width/2, 0, deck.canvas.width/2, deck.canvas.height
                        //     );
                        //     deck.ctx.restore();
                        // }

                        if ((index+1) == totalTriangles) {
                            if (deck.lockdown.forceUpdate) {
                                deck.lockdown.updateTriangles();
                            }
                        }
                    });
                };

                deck.lockdown.updateTriangles(deck);

                return deck;
            }
        };
    </script>
    <script>
        window.hydra.renderers['pink'] = {
            init: function(deck) {
                deck.pink = {};
                deck.pink.inputs = [];

                deck.pink.render = () => {
                    deck.ctx.clearRect(0, 0, deck.canvas.width, deck.canvas.height);

                    let radius = hydra.deck1.quark.radius * hydra.deck1.quark.scale;

                    deck.ctx.fillStyle = '#ff00e4';
                    deck.ctx.beginPath();
                    deck.ctx.moveTo(hydra.centerX, hydra.centerY-(radius/2));
                    deck.ctx.lineTo(hydra.centerX+x, hydra.centerY+((radius/2)/2));
                    deck.ctx.lineTo(hydra.centerX-x, hydra.centerY+((radius/2)/2));
                    
                    deck.ctx.fill();
                }

                return deck;
            }
        };
    </script>
    <script>
        hydra.boot();

        // hydra.boot({
        //     id: 'hydra',
        //     renderers: {
        //         quark: quark,
        //         neuromute: neuromute,
        //         lockdown: lockdown,
        //         pink: pink
        //     },
        //     deck1: {
        //         visual: 'quark',
        //         preset: 1
        //     },
        //     deck2: {
        //         visual: 'pink',
        //         preset: 1
        //     }
        // });
    </script>
</body>

</html>
